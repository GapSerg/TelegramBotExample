2022-10-11 11:32:12,646 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 10164 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 11:32:12,646 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 11:32:13,125 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 11:32:13,193 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 51 ms. Found 4 JPA repository interfaces.
2022-10-11 11:32:13,509 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 11:32:13,509 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 11:32:13,509 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 11:32:13,509 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 11:32:13,578 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 11:32:13,578 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 901 ms
2022-10-11 11:32:13,678 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 11:32:13,747 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 11:32:13,835 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 11:32:13,913 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 11:32:14,183 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 11:32:14,258 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 11:32:14,310 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 11:32:14,343 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 11:32:14,410 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 11:32:14,463 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 11:32:14,811 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 11:32:14,811 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 11:32:15,280 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 11:32:15,484 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 11:32:15,500 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 11:32:15,516 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://dfbe-82-209-241-194.eu.ngrok.io
2022-10-11 11:32:15,516 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://dfbe-82-209-241-194.eu.ngrok.io
2022-10-11 11:32:15,516 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 11:32:15,539 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 11:32:15,618 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 11:32:15,623 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 11:32:15,626 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 11:32:15,633 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 11:32:15,638 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 11:32:16,299 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 3.987 seconds (JVM running for 4.69)
2022-10-11 11:32:44,529 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 11:32:44,529 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 11:32:44,539 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 11:32:47,626 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 24512 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 11:32:47,626 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 11:32:48,191 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 11:32:48,251 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 55 ms. Found 4 JPA repository interfaces.
2022-10-11 11:32:48,659 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 11:32:48,659 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 11:32:48,659 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 11:32:48,659 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 11:32:48,778 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 11:32:48,778 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1126 ms
2022-10-11 11:32:48,910 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 11:32:48,995 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 11:32:49,096 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 11:32:49,187 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 11:32:49,514 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 11:32:49,596 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 11:32:49,684 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 11:32:49,720 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 11:32:49,789 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 11:32:49,845 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 11:32:50,232 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 11:32:50,232 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 11:32:50,780 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 11:32:50,979 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 11:32:50,989 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 11:32:51,006 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 11:32:51,006 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 11:32:51,006 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 11:32:51,031 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 11:32:51,126 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 11:32:51,134 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 11:32:51,137 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 11:32:51,140 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 11:32:51,149 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 11:32:51,406 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 11:32:51,407 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 11:32:51,408 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 11:32:51,600 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :134827965a5c69df9f034d
2022-10-11 11:32:51,670 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-1] Got ACTIVITY callback type with activity :DRIVER and token : 134827965a5c69df9f034d
2022-10-11 11:32:51,694 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-1] Find all routes
2022-10-11 11:32:51,720 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.434 seconds (JVM running for 5.077)
2022-10-11 11:33:40,312 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-2] Callback data with type: DRIVER_ROUTE and routeId: 2 and token: 134827965a5c69df9f034d
2022-10-11 11:33:41,531 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-4] Callback data with type: DRIVER_ROUTE and routeId: 5 and token: 134827965a5c69df9f034d
2022-10-11 11:33:42,658 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.ChoseDateDriverCallbackType [http-nio-5000-exec-3] Callback data with type: CHOSE_DATE_DRIVER with token : 134827965a5c69df9f034d
2022-10-11 11:33:48,429 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.FirstDateDriverCallbackType [http-nio-5000-exec-5] Got FIRST_DATE_DRIVER callback type with first date :2022-10-30 with token: 134827965a5c69df9f034d
2022-10-11 11:33:50,081 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.SecondDateDriverCallbackType [http-nio-5000-exec-6] Got SECOND_DATE_DRIVER callback type with second date :2022-11-01 and token : 134827965a5c69df9f034d
2022-10-11 11:33:51,140 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Find passengers by first date :2022-10-30 and second date:2022-11-01 with cities:[City(id=2, name=BELASTOK), City(id=5, name=BREST)]
2022-10-11 11:33:52,684 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CheckDriverCallbackType [http-nio-5000-exec-8] Got callback type :CHECK_DRIVER_REQUEST with token :134827965a5c69df9f034d
2022-10-11 11:35:53,155 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 11:35:53,156 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 11:35:53,163 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 11:36:01,463 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 25888 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 11:36:01,466 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 11:36:02,062 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 11:36:02,142 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2022-10-11 11:36:02,588 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 11:36:02,591 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 11:36:02,591 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 11:36:02,591 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 11:36:02,690 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 11:36:02,690 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1194 ms
2022-10-11 11:36:02,861 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 11:36:02,931 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 11:36:03,036 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 11:36:03,130 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 11:36:03,457 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 11:36:03,523 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 11:36:03,575 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 11:36:03,610 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 11:36:03,692 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 11:36:03,759 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 11:36:04,139 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 11:36:04,139 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 11:36:04,674 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 11:36:04,932 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 11:36:04,951 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 11:36:04,958 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 11:36:04,958 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 11:36:04,958 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 11:36:04,980 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 11:36:05,072 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 11:36:05,081 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 11:36:05,084 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 11:36:05,087 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 11:36:05,097 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 11:36:05,681 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.589 seconds (JVM running for 5.284)
2022-10-11 11:36:26,493 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 11:36:26,493 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 11:36:26,494 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 11:36:26,590 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.SaveDriverCallbackType [http-nio-5000-exec-1] Got SAVE_DRIVER_WITHOUT_DESCRIPTION callback type without description with token:134827965a5c69df9f034d with user : Myachin97
2022-10-11 11:36:26,591 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] class com.godeltech.springgodelbot.model.entity.DriverRequest wasn't found by token=134827965a5c69df9f034d
2022-10-11 11:36:26,594 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :5632797057, messageId: 718 and chatId :834450967
2022-10-11 11:36:29,595 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :084620ad726c2da06cdb32
2022-10-11 11:36:29,626 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :PASSENGER and token : 084620ad726c2da06cdb32
2022-10-11 11:36:29,643 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 11:36:30,858 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-3] Callback data with type: PASSENGER_ROUTE and routeId: 3 and with token: 084620ad726c2da06cdb32
2022-10-11 11:36:31,454 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-4] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: 084620ad726c2da06cdb32
2022-10-11 11:36:32,665 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-5] Callback data with type: CHOSE_DATE_PASSENGER with token : 084620ad726c2da06cdb32
2022-10-11 11:36:33,807 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-6] Got FIRST_DATE_PASSENGER type with first date :2022-11-02 with token: 084620ad726c2da06cdb32
2022-10-11 11:36:34,818 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Find drivers by first date :2022-11-02 and second date:null with cities:[City(id=3, name=WROCLAW), City(id=5, name=BREST)]
2022-10-11 11:36:40,596 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CheckPassengerCallbackType [http-nio-5000-exec-8] Got callback with type : CHECK_PASSENGER_REQUEST with token : 084620ad726c2da06cdb32
2022-10-11 11:36:42,601 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-9] Find tokens by userId :834450967
2022-10-11 11:36:42,627 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-9] Is he member of group?
2022-10-11 11:36:42,734 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-9] null
2022-10-11 11:37:01,962 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SavePassengerWithoutDescriptionCallbackType [http-nio-5000-exec-10] Got callback with type : SAVE_PASSENGER_WITHOUT_DESCRIPTION with token : 084620ad726c2da06cdb32
2022-10-11 11:37:01,963 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-10] Delete messages with chat id : 834450967 and messages : [718]
2022-10-11 11:37:02,058 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Save passenger request : Request(chatId=834450967, userDto=UserDto(id=834450967, firstName=Артем, lastName=Мячин, userName=Myachin97), cities=[City(id=3, name=WROCLAW), City(id=5, name=BREST)], firstDate=2022-11-02, secondDate=null, description=null, needForDescription=true, messages=[718], activity=PASSENGER)
2022-10-11 11:37:02,130 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Delete token from messages : 084620ad726c2da06cdb32
2022-10-11 11:37:02,140 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Create new token with userId :834450967, messageId: 718 and chatId :834450967
2022-10-11 11:37:08,032 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 11:37:08,033 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 11:37:08,121 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 11:37:08,136 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 720 and chatId :834450967
2022-10-11 11:37:09,313 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :f8471a88e26e9c2967e01e
2022-10-11 11:37:09,336 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :PASSENGER and token : f8471a88e26e9c2967e01e
2022-10-11 11:37:10,595 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-3] Callback data with type: PASSENGER_ROUTE and routeId: 4 and with token: f8471a88e26e9c2967e01e
2022-10-11 11:37:11,133 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-4] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: f8471a88e26e9c2967e01e
2022-10-11 11:37:11,998 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-5] Callback data with type: CHOSE_DATE_PASSENGER with token : f8471a88e26e9c2967e01e
2022-10-11 11:37:13,473 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-6] Got FIRST_DATE_PASSENGER type with first date :2022-11-02 with token: f8471a88e26e9c2967e01e
2022-10-11 11:37:17,361 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Find drivers by first date :2022-11-02 and second date:null with cities:[City(id=4, name=GDANSK), City(id=5, name=BREST)]
2022-10-11 11:37:20,680 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CheckPassengerCallbackType [http-nio-5000-exec-8] Got callback with type : CHECK_PASSENGER_REQUEST with token : f8471a88e26e9c2967e01e
2022-10-11 11:37:23,434 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-9] Find tokens by userId :834450967
2022-10-11 11:37:23,443 INFO com.godeltech.springgodelbot.resolver.message.type.impl.OnlyTextMessageType [http-nio-5000-exec-9] Got message for saving description of passenger with token :f8471a88e26e9c2967e01e 
2022-10-11 11:37:23,444 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Save passenger request : Request(chatId=834450967, userDto=UserDto(id=834450967, firstName=Артем, lastName=Мячин, userName=Myachin97), cities=[City(id=4, name=GDANSK), City(id=5, name=BREST)], firstDate=2022-11-02, secondDate=null, description=Yap yap, needForDescription=true, messages=[721], activity=PASSENGER)
2022-10-11 11:37:23,491 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-9] Delete messages with chat id : 834450967 and messages : [721]
2022-10-11 11:37:23,784 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-9] Delete token from messages : f8471a88e26e9c2967e01e
2022-10-11 11:37:23,808 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-9] Create new token with userId :834450967 and chatId :834450967
2022-10-11 11:37:31,102 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-10] Got OFFERS_ACTIVITY callback type
2022-10-11 11:37:31,106 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Income message with token :d74c7893dad42e6464a928
2022-10-11 11:37:31,995 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-1] Callback with type :MY_OFFERS and activity : DRIVER and token: d74c7893dad42e6464a928
2022-10-11 11:37:32,002 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-1] Find offers by id:834450967 and activity :DRIVER
2022-10-11 11:37:33,034 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-2] Got MAIN_MENU callback type
2022-10-11 11:37:33,035 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-2] Is he member of group?
2022-10-11 11:37:33,112 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-2] Check existing of user by id: 834450967
2022-10-11 11:37:33,119 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Delete token from messages : d74c7893dad42e6464a928
2022-10-11 11:37:33,138 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Create new token with userId :834450967, messageId: 723 and chatId :834450967
2022-10-11 11:37:33,922 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-3] Got OFFERS_ACTIVITY callback type
2022-10-11 11:37:33,926 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :b1431ba6c4b3a705a15810
2022-10-11 11:37:34,542 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-4] Callback with type :MY_OFFERS and activity : PASSENGER and token: b1431ba6c4b3a705a15810
2022-10-11 11:37:34,547 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-4] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 11:37:38,572 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-5] Got CHANGE_OFFER callback type with route id :3 and token: b1431ba6c4b3a705a15810
2022-10-11 11:37:38,575 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-5] Find offer by id : 3
2022-10-11 11:37:41,153 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.DeleteOfferCallbackType [http-nio-5000-exec-6] Delete offer by id :3 and token: b1431ba6c4b3a705a15810
2022-10-11 11:37:41,160 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-6] Delete offer by id : 3
2022-10-11 11:37:41,160 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-6] Get offer by id: 3
2022-10-11 11:37:41,182 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-6] Delete token from messages : b1431ba6c4b3a705a15810
2022-10-11 11:37:41,189 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-6] Create new token with userId :834450967, messageId: 723 and chatId :834450967
2022-10-11 11:37:42,133 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-7] Income message with token :fc409ba5dc43085361a723
2022-10-11 11:37:42,156 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-7] Got ACTIVITY callback type with activity :DRIVER and token : fc409ba5dc43085361a723
2022-10-11 11:37:42,978 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-8] Callback data with type: DRIVER_ROUTE and routeId: 2 and token: fc409ba5dc43085361a723
2022-10-11 11:37:43,549 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-9] Callback data with type: DRIVER_ROUTE and routeId: 4 and token: fc409ba5dc43085361a723
2022-10-11 11:37:44,274 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.ChoseDateDriverCallbackType [http-nio-5000-exec-10] Callback data with type: CHOSE_DATE_DRIVER with token : fc409ba5dc43085361a723
2022-10-11 11:37:45,408 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.FirstDateDriverCallbackType [http-nio-5000-exec-1] Got FIRST_DATE_DRIVER callback type with first date :2022-11-02 with token: fc409ba5dc43085361a723
2022-10-11 11:37:46,367 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Find passengers by first date :2022-11-02 and second date:null with cities:[City(id=2, name=BELASTOK), City(id=4, name=GDANSK)]
2022-10-11 11:37:48,274 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CheckDriverCallbackType [http-nio-5000-exec-3] Got callback type :CHECK_DRIVER_REQUEST with token :fc409ba5dc43085361a723
2022-10-11 11:37:50,993 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Find tokens by userId :834450967
2022-10-11 11:37:51,002 INFO com.godeltech.springgodelbot.resolver.message.type.impl.OnlyTextMessageType [http-nio-5000-exec-4] Got message for saving description of driver with token :fc409ba5dc43085361a723 
2022-10-11 11:37:51,003 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-4] Delete messages with chat id : 834450967 and messages : [723]
2022-10-11 11:37:51,103 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-4] Save supplier by: Request(chatId=834450967, userDto=UserDto(id=834450967, firstName=Артем, lastName=Мячин, userName=Myachin97), cities=[City(id=2, name=BELASTOK), City(id=4, name=GDANSK)], firstDate=2022-11-02, secondDate=null, description=Yap yap, needForDescription=true, messages=[723], activity=DRIVER)
2022-10-11 11:37:51,149 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Delete token from messages : fc409ba5dc43085361a723
2022-10-11 11:37:51,156 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Create new token with userId :834450967 and chatId :834450967
2022-10-11 11:37:54,478 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-5] Income message with token :1e42f38a4ee0445f81da7e
2022-10-11 11:37:54,502 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-5] Got ACTIVITY callback type with activity :PASSENGER and token : 1e42f38a4ee0445f81da7e
2022-10-11 11:37:55,213 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-6] Callback data with type: PASSENGER_ROUTE and routeId: 4 and with token: 1e42f38a4ee0445f81da7e
2022-10-11 11:37:55,823 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-7] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: 1e42f38a4ee0445f81da7e
2022-10-11 11:37:56,683 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-8] Callback data with type: CHOSE_DATE_PASSENGER with token : 1e42f38a4ee0445f81da7e
2022-10-11 11:37:58,563 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-9] Got FIRST_DATE_PASSENGER type with first date :2022-11-02 with token: 1e42f38a4ee0445f81da7e
2022-10-11 11:37:59,907 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Find drivers by first date :2022-11-02 and second date:null with cities:[City(id=4, name=GDANSK), City(id=5, name=BREST)]
2022-10-11 11:38:04,673 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CheckPassengerCallbackType [http-nio-5000-exec-1] Got callback with type : CHECK_PASSENGER_REQUEST with token : 1e42f38a4ee0445f81da7e
2022-10-11 11:38:05,431 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SavePassengerWithoutDescriptionCallbackType [http-nio-5000-exec-2] Got callback with type : SAVE_PASSENGER_WITHOUT_DESCRIPTION with token : 1e42f38a4ee0445f81da7e
2022-10-11 11:38:05,432 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-2] Delete messages with chat id : 834450967 and messages : [725]
2022-10-11 11:38:05,611 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Save passenger request : Request(chatId=834450967, userDto=UserDto(id=834450967, firstName=Артем, lastName=Мячин, userName=Myachin97), cities=[City(id=4, name=GDANSK), City(id=5, name=BREST)], firstDate=2022-11-02, secondDate=null, description=null, needForDescription=true, messages=[725], activity=PASSENGER)
2022-10-11 11:38:05,634 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Delete token from messages : 1e42f38a4ee0445f81da7e
2022-10-11 11:38:05,646 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Create new token with userId :834450967, messageId: 725 and chatId :834450967
2022-10-11 11:38:42,994 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 11:38:42,995 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 11:38:43,001 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 11:38:47,604 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 13064 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 11:38:47,607 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 11:38:48,144 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 11:38:48,203 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 53 ms. Found 4 JPA repository interfaces.
2022-10-11 11:38:48,576 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 11:38:48,576 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 11:38:48,576 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 11:38:48,576 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 11:38:48,693 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 11:38:48,693 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1054 ms
2022-10-11 11:38:48,808 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 11:38:48,875 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 11:38:48,966 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 11:38:49,056 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 11:38:49,374 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 11:38:49,444 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 11:38:49,500 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 11:38:49,535 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 11:38:49,610 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 11:38:49,691 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 11:38:50,234 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 11:38:50,234 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 11:38:51,031 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 11:38:51,338 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 11:38:51,356 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 11:38:51,362 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 11:38:51,362 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 11:38:51,363 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 11:38:51,380 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 11:38:51,463 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 11:38:51,470 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 11:38:51,473 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 11:38:51,484 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 11:38:51,490 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 11:38:52,080 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.83 seconds (JVM running for 5.517)
2022-10-11 11:38:59,643 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 11:38:59,643 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 11:38:59,644 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 11:38:59,784 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 11:38:59,795 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 11:38:59,905 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 11:38:59,922 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 726 and chatId :834450967
2022-10-11 11:39:01,104 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :03478baa1056735bb63682
2022-10-11 11:39:01,139 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :PASSENGER and token : 03478baa1056735bb63682
2022-10-11 11:39:01,160 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 11:39:02,699 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-3] Callback data with type: PASSENGER_ROUTE and routeId: 3 and with token: 03478baa1056735bb63682
2022-10-11 11:39:03,940 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-4] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: 03478baa1056735bb63682
2022-10-11 11:39:04,649 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-5] Callback data with type: CHOSE_DATE_PASSENGER with token : 03478baa1056735bb63682
2022-10-11 11:39:05,543 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-6] Got FIRST_DATE_PASSENGER type with first date :2022-11-02 with token: 03478baa1056735bb63682
2022-10-11 11:39:06,443 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Find drivers by first date :2022-11-02 and second date:null with cities:[City(id=3, name=WROCLAW), City(id=5, name=BREST)]
2022-10-11 11:39:07,645 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CheckPassengerCallbackType [http-nio-5000-exec-8] Got callback with type : CHECK_PASSENGER_REQUEST with token : 03478baa1056735bb63682
2022-10-11 11:39:08,370 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SavePassengerWithoutDescriptionCallbackType [http-nio-5000-exec-9] Got callback with type : SAVE_PASSENGER_WITHOUT_DESCRIPTION with token : 03478baa1056735bb63682
2022-10-11 11:39:08,372 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-9] Delete messages with chat id : 834450967 and messages : [727]
2022-10-11 11:39:08,469 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Save passenger request : Request(chatId=834450967, userDto=UserDto(id=834450967, firstName=Артем, lastName=Мячин, userName=Myachin97), cities=[City(id=3, name=WROCLAW), City(id=5, name=BREST)], firstDate=2022-11-02, secondDate=null, description=null, needForDescription=true, messages=[727], activity=PASSENGER)
2022-10-11 11:39:08,552 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-9] Delete token from messages : 03478baa1056735bb63682
2022-10-11 11:39:08,571 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-9] Create new token with userId :834450967, messageId: 727 and chatId :834450967
2022-10-11 11:39:10,815 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Income message with token :484ea08478bbc2f1315bc2
2022-10-11 11:39:10,839 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-10] Got ACTIVITY callback type with activity :PASSENGER and token : 484ea08478bbc2f1315bc2
2022-10-11 11:39:12,922 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-1] Callback data with type: PASSENGER_ROUTE and routeId: 3 and with token: 484ea08478bbc2f1315bc2
2022-10-11 11:39:14,031 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-2] Callback data with type: PASSENGER_ROUTE and routeId: 6 and with token: 484ea08478bbc2f1315bc2
2022-10-11 11:39:15,154 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-3] Callback data with type: CHOSE_DATE_PASSENGER with token : 484ea08478bbc2f1315bc2
2022-10-11 11:39:17,597 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CancelPassengerRequestCallbackType [http-nio-5000-exec-4] Got callback : CANCEL_PASSENGER_REQUEST with token : 484ea08478bbc2f1315bc2
2022-10-11 11:39:17,599 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-4] Delete messages with chat id : 834450967 and messages : [728]
2022-10-11 11:39:17,733 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Delete token from messages : 484ea08478bbc2f1315bc2
2022-10-11 11:39:17,756 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Create new token with userId :834450967, messageId: 728 and chatId :834450967
2022-10-11 11:39:18,680 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-5] Income message with token :fc4de4b210acf0233b3a48
2022-10-11 11:39:18,705 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-5] Got ACTIVITY callback type with activity :DRIVER and token : fc4de4b210acf0233b3a48
2022-10-11 11:39:19,667 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-6] Callback data with type: DRIVER_ROUTE and routeId: 3 and token: fc4de4b210acf0233b3a48
2022-10-11 11:39:20,338 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-7] Callback data with type: DRIVER_ROUTE and routeId: 6 and token: fc4de4b210acf0233b3a48
2022-10-11 11:39:21,122 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.ChoseDateDriverCallbackType [http-nio-5000-exec-8] Callback data with type: CHOSE_DATE_DRIVER with token : fc4de4b210acf0233b3a48
2022-10-11 11:39:21,766 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.FirstDateDriverCallbackType [http-nio-5000-exec-9] Got FIRST_DATE_DRIVER callback type with first date :2022-10-24 with token: fc4de4b210acf0233b3a48
2022-10-11 11:39:24,322 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CancelDateDriverCallbackType [http-nio-5000-exec-10] Got CANCEL_DATE_DRIVER type with token : fc4de4b210acf0233b3a48
2022-10-11 11:39:25,379 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CancelDriverRequestCallbackType [http-nio-5000-exec-1] Got callback : CANCEL_DRIVER_REQUEST with token : fc4de4b210acf0233b3a48
2022-10-11 11:39:25,386 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Delete token from messages : fc4de4b210acf0233b3a48
2022-10-11 11:39:25,410 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Delete messages with chat id : 834450967 and messages : [729]
2022-10-11 11:39:25,487 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 729 and chatId :834450967
2022-10-11 11:39:26,302 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :ba4c08bd93959f333ee885
2022-10-11 11:39:26,324 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :DRIVER and token : ba4c08bd93959f333ee885
2022-10-11 11:39:26,901 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-3] Callback data with type: DRIVER_ROUTE and routeId: 3 and token: ba4c08bd93959f333ee885
2022-10-11 11:39:27,906 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-4] Callback data with type: DRIVER_ROUTE and routeId: 6 and token: ba4c08bd93959f333ee885
2022-10-11 11:39:31,632 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.ChoseDateDriverCallbackType [http-nio-5000-exec-5] Callback data with type: CHOSE_DATE_DRIVER with token : ba4c08bd93959f333ee885
2022-10-11 11:39:34,074 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CancelDriverRequestCallbackType [http-nio-5000-exec-6] Got callback : CANCEL_DRIVER_REQUEST with token : ba4c08bd93959f333ee885
2022-10-11 11:39:34,079 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-6] Delete token from messages : ba4c08bd93959f333ee885
2022-10-11 11:39:34,101 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-6] Delete messages with chat id : 834450967 and messages : [730]
2022-10-11 11:39:34,191 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-6] Create new token with userId :834450967, messageId: 730 and chatId :834450967
2022-10-11 11:39:35,337 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-7] Got OFFERS_ACTIVITY callback type
2022-10-11 11:39:35,342 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-7] Income message with token :134c5db0934a04a5826de5
2022-10-11 11:39:36,120 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-8] Callback with type :MY_OFFERS and activity : DRIVER and token: 134c5db0934a04a5826de5
2022-10-11 11:39:36,127 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-8] Find offers by id:834450967 and activity :DRIVER
2022-10-11 11:39:37,034 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-9] Got CHANGE_OFFER callback type with route id :5 and token: 134c5db0934a04a5826de5
2022-10-11 11:39:37,039 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Find offer by id : 5
2022-10-11 11:39:39,055 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.DeleteOfferCallbackType [http-nio-5000-exec-10] Delete offer by id :5 and token: 134c5db0934a04a5826de5
2022-10-11 11:39:39,061 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Delete offer by id : 5
2022-10-11 11:39:39,061 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Get offer by id: 5
2022-10-11 11:39:39,091 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Delete token from messages : 134c5db0934a04a5826de5
2022-10-11 11:39:39,098 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Create new token with userId :834450967, messageId: 731 and chatId :834450967
2022-10-11 13:26:58,536 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 13:26:58,539 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 13:26:58,545 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:01:23,781 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 6028 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:01:23,785 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:01:24,538 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:01:24,623 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 74 ms. Found 5 JPA repository interfaces.
2022-10-11 18:01:25,104 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:01:25,115 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:01:25,116 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:01:25,116 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:01:25,245 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:01:25,245 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1413 ms
2022-10-11 18:01:25,482 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:01:25,564 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:01:25,701 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:01:25,776 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:01:26,192 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:01:26,287 INFO liquibase.logging.core.JavaLogger [main] Custom SQL executed
2022-10-11 18:01:26,290 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.7/2022-10-11-changes-create-type-request_type.xml::2022-10-11--create-type-request_type::a.miachyn ran successfully in 11ms
2022-10-11 18:01:26,317 INFO liquibase.logging.core.JavaLogger [main] Table request created
2022-10-11 18:01:26,319 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.7/2022-10-11-changes-create-table-request.xml::2022-10-11-changes-create-table-request::a.miachyn ran successfully in 18ms
2022-10-11 18:01:26,325 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:01:26,429 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:01:26,499 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:01:26,640 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:01:26,749 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:01:26,863 ERROR org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Failed to initialize JPA EntityManagerFactory: Unable to load class [postgreSqlType]
2022-10-11 18:01:26,865 WARN org.springframework.context.support.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [postgreSqlType]
2022-10-11 18:01:26,865 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2022-10-11 18:01:26,877 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2022-10-11 18:01:26,881 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2022-10-11 18:01:26,891 INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener [main] 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-10-11 18:01:26,913 ERROR org.springframework.boot.SpringApplication [main] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [postgreSqlType]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.godeltech.springgodelbot.SpringGodelBotApplication.main(SpringGodelBotApplication.java:10)
Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [postgreSqlType]
	at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:133)
	at org.hibernate.boot.internal.ClassLoaderAccessImpl.classForName(ClassLoaderAccessImpl.java:67)
	at org.hibernate.cfg.annotations.SimpleValueBinder.fillSimpleValue(SimpleValueBinder.java:536)
	at org.hibernate.cfg.SetSimpleValueTypeSecondPass.doSecondPass(SetSimpleValueTypeSecondPass.java:25)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1621)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 16 common frames omitted
Caused by: java.lang.ClassNotFoundException: Could not load requested class : postgreSqlType
	at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:210)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:398)
	at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:130)
	... 31 common frames omitted
2022-10-11 18:02:29,038 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 17392 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:02:29,041 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:02:29,587 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:02:29,647 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2022-10-11 18:02:29,993 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:02:29,999 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:02:30,000 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:02:30,000 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:02:30,083 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:02:30,083 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1007 ms
2022-10-11 18:02:30,194 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:02:30,264 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:02:30,352 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:02:30,425 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:02:30,726 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:02:30,804 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:02:30,875 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:02:30,899 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:02:30,975 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:02:31,035 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:02:31,500 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:02:31,506 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:02:32,214 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:02:32,475 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:02:32,495 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:02:32,501 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:02:32,501 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:02:32,502 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:02:32,520 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:02:32,626 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [scheduling-1] SQL Error: 0, SQLState: 42703
2022-10-11 18:02:32,627 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [scheduling-1] ERROR: column offer0_.offer_id does not exist
  Hint: Perhaps you meant to reference the column "offer0_.user_id".
  Position: 137
2022-10-11 18:02:32,638 ERROR org.springframework.scheduling.support.TaskUtils$LoggingErrorHandler [scheduling-1] Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:259)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy128.deleteOffersBySecondDateBeforeAndSecondDateIsNotNull(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.OfferServiceImpl.deleteBySecondDateAfter(OfferServiceImpl.java:141)
	at com.godeltech.springgodelbot.service.impl.OfferServiceImpl$$FastClassBySpringCGLIB$$ac274273.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.OfferServiceImpl$$EnhancerBySpringCGLIB$$94c41893.deleteBySecondDateAfter(<generated>)
	at com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl.deleteExpireOffers(ScheduleServiceImpl.java:29)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:67)
	at org.hibernate.loader.Loader.getResultSet(Loader.java:2322)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2075)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2037)
	at org.hibernate.loader.Loader.doQuery(Loader.java:956)
	at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)
	at org.hibernate.loader.Loader.doList(Loader.java:2868)
	at org.hibernate.loader.Loader.doList(Loader.java:2850)
	at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)
	at org.hibernate.loader.Loader.list(Loader.java:2677)
	at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:540)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)
	at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)
	at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1459)
	at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)
	at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)
	at org.hibernate.query.Query.getResultList(Query.java:165)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getResultList(CriteriaQueryTypeQueryAdapter.java:76)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$DeleteExecution.doExecute(JpaQueryExecution.java:274)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 33 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: column offer0_.offer_id does not exist
  Hint: Perhaps you meant to reference the column "offer0_.user_id".
  Position: 137
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:119)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)
	... 66 common frames omitted
2022-10-11 18:02:32,638 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:02:32,641 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:02:32,653 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:02:32,658 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:02:33,431 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.743 seconds (JVM running for 5.602)
2022-10-11 18:04:21,674 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:04:21,676 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:04:21,683 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:04:24,189 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 11888 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:04:24,192 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:04:24,747 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:04:24,807 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 53 ms. Found 5 JPA repository interfaces.
2022-10-11 18:04:25,162 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:04:25,167 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:04:25,168 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:04:25,168 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:04:25,248 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:04:25,249 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1020 ms
2022-10-11 18:04:25,356 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:04:25,417 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:04:25,507 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:04:25,587 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:04:25,904 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:04:25,986 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:04:26,061 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:04:26,086 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:04:26,165 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:04:26,227 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:04:26,632 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:04:26,638 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:04:27,173 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:04:27,430 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:04:27,448 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:04:27,456 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:04:27,455 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:04:27,456 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:04:27,472 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:04:27,548 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [scheduling-1] SQL Error: 0, SQLState: 42703
2022-10-11 18:04:27,549 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [scheduling-1] ERROR: column offer0_.offer_id does not exist
  Hint: Perhaps you meant to reference the column "offer0_.user_id".
  Position: 137
2022-10-11 18:04:27,560 ERROR org.springframework.scheduling.support.TaskUtils$LoggingErrorHandler [scheduling-1] Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:259)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy128.deleteOffersBySecondDateBeforeAndSecondDateIsNotNull(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.OfferServiceImpl.deleteBySecondDateAfter(OfferServiceImpl.java:141)
	at com.godeltech.springgodelbot.service.impl.OfferServiceImpl$$FastClassBySpringCGLIB$$ac274273.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.OfferServiceImpl$$EnhancerBySpringCGLIB$$94c41893.deleteBySecondDateAfter(<generated>)
	at com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl.deleteExpireOffers(ScheduleServiceImpl.java:29)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:67)
	at org.hibernate.loader.Loader.getResultSet(Loader.java:2322)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2075)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2037)
	at org.hibernate.loader.Loader.doQuery(Loader.java:956)
	at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)
	at org.hibernate.loader.Loader.doList(Loader.java:2868)
	at org.hibernate.loader.Loader.doList(Loader.java:2850)
	at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)
	at org.hibernate.loader.Loader.list(Loader.java:2677)
	at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:540)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)
	at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)
	at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1459)
	at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)
	at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)
	at org.hibernate.query.Query.getResultList(Query.java:165)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getResultList(CriteriaQueryTypeQueryAdapter.java:76)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$DeleteExecution.doExecute(JpaQueryExecution.java:274)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 33 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: column offer0_.offer_id does not exist
  Hint: Perhaps you meant to reference the column "offer0_.user_id".
  Position: 137
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:119)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)
	... 66 common frames omitted
2022-10-11 18:04:27,561 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:04:27,564 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:04:27,576 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:04:27,582 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:04:28,171 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.536 seconds (JVM running for 5.524)
2022-10-11 18:05:54,499 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:05:54,501 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:05:54,507 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:05:59,441 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 21352 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:05:59,444 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:05:59,988 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:06:00,056 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 63 ms. Found 5 JPA repository interfaces.
2022-10-11 18:06:00,438 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:06:00,444 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:06:00,444 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:06:00,445 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:06:00,530 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:06:00,531 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1049 ms
2022-10-11 18:06:00,634 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:06:00,696 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:06:00,778 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:06:00,851 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:06:01,233 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:06:01,306 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:06:01,377 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:06:01,404 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:06:01,481 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:06:01,544 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:06:01,921 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:06:01,927 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:06:02,451 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:06:02,668 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:06:02,688 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:06:02,697 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:06:02,696 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:06:02,697 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:06:02,709 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:06:02,786 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:06:02,793 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:06:02,796 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:06:02,804 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:06:02,812 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:06:03,345 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.266 seconds (JVM running for 4.975)
2022-10-11 18:06:11,451 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 18:06:11,452 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 18:06:11,453 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 18:06:11,613 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :3e4de5a433a69a2584be35
2022-10-11 18:06:11,675 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-1] Got ACTIVITY callback type with activity :DRIVER and token : 3e4de5a433a69a2584be35 by user : Myachin97
2022-10-11 18:06:11,701 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-1] Find all routes
2022-10-11 18:06:11,718 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Save new request with tokenId: 3e4de5a433a69a2584be35 with activity : DRIVER
2022-10-11 18:06:11,733 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-1] SQL Error: 0, SQLState: 42703
2022-10-11 18:06:11,734 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-1] ERROR: column request0_.request_type does not exist
  Position: 261
2022-10-11 18:06:11,743 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet
2022-10-11 18:08:06,039 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:08:06,042 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:08:06,048 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:08:25,486 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 23692 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:08:25,490 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:08:26,112 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:08:26,174 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2022-10-11 18:08:26,545 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:08:26,551 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:08:26,552 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:08:26,552 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:08:26,655 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:08:26,656 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1125 ms
2022-10-11 18:08:26,810 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:08:26,877 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:08:26,969 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:08:27,060 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:08:27,363 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:08:27,437 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:08:27,511 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:08:27,537 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:08:27,621 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:08:27,689 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:08:28,061 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:08:28,066 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:08:28,589 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:08:28,837 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:08:28,861 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:08:28,869 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:08:28,869 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:08:28,869 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:08:28,887 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:08:28,974 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:08:28,978 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:08:28,981 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:08:28,987 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:08:28,992 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:08:29,482 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.344 seconds (JVM running for 5.065)
2022-10-11 18:08:31,483 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 18:08:31,483 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 18:08:31,486 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 2 ms
2022-10-11 18:08:31,627 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :3e4de5a433a69a2584be35
2022-10-11 18:08:31,655 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] There was an answer on the message with id : 3e4de5a433a69a2584be35
2022-10-11 18:09:03,270 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-2] Got OFFERS_ACTIVITY callback type
2022-10-11 18:09:03,274 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :3e4de5a433a69a2584be35
2022-10-11 18:09:03,280 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] There was an answer on the message with id : 3e4de5a433a69a2584be35
2022-10-11 18:09:08,518 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-5] Got /start message
2022-10-11 18:09:08,529 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-5] Is he member of group?
2022-10-11 18:09:08,643 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-5] Check existing of user by id: 834450967
2022-10-11 18:09:08,658 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-5] Create new token with userId :834450967, messageId: 732 and chatId :834450967
2022-10-11 18:09:10,835 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :ae4e6ab5070d284309761a
2022-10-11 18:09:10,857 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-3] Got ACTIVITY callback type with activity :DRIVER and token : ae4e6ab5070d284309761a by user : Myachin97
2022-10-11 18:09:10,894 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-3] Find all routes
2022-10-11 18:09:10,919 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Save new request with tokenId: ae4e6ab5070d284309761a with activity : DRIVER
2022-10-11 18:09:10,948 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-3] Unknown entity: com.godeltech.springgodelbot.model.entity.DriverRequest; nested exception is java.lang.IllegalArgumentException: Unknown entity: com.godeltech.springgodelbot.model.entity.DriverRequest
2022-10-11 18:12:23,715 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:12:23,717 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:12:23,723 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:12:28,089 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 12940 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:12:28,092 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:12:28,625 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:12:28,684 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2022-10-11 18:12:29,074 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:12:29,085 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:12:29,085 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:12:29,086 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:12:29,186 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:12:29,186 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1054 ms
2022-10-11 18:12:29,301 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:12:29,360 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:12:29,440 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:12:29,522 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:12:29,828 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:12:29,904 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:12:29,967 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:12:29,990 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:12:30,064 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:12:30,128 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:12:30,528 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:12:30,534 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:12:31,048 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:12:31,266 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:12:31,284 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:12:31,291 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:12:31,290 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:12:31,292 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:12:31,310 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:12:31,388 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:12:31,394 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:12:31,398 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:12:31,406 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:12:31,412 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:12:32,199 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.475 seconds (JVM running for 5.186)
2022-10-11 18:12:35,668 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 18:12:35,669 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 18:12:35,672 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 3 ms
2022-10-11 18:12:35,820 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :ae4e6ab5070d284309761a
2022-10-11 18:12:35,850 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] There was an answer on the message with id : ae4e6ab5070d284309761a
2022-10-11 18:12:40,704 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-2] Got /start message
2022-10-11 18:12:40,716 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-2] Is he member of group?
2022-10-11 18:12:40,814 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-2] Check existing of user by id: 834450967
2022-10-11 18:12:40,826 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Create new token with userId :834450967, messageId: 734 and chatId :834450967
2022-10-11 18:12:42,732 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :8d4dfd8be0f8feecbea3d2
2022-10-11 18:12:42,748 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-3] Got ACTIVITY callback type with activity :PASSENGER and token : 8d4dfd8be0f8feecbea3d2 by user : Myachin97
2022-10-11 18:12:42,771 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-3] Find all routes
2022-10-11 18:12:42,792 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Save new request with tokenId: 8d4dfd8be0f8feecbea3d2 with activity : PASSENGER
2022-10-11 18:12:42,811 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-3] SQL Error: 0, SQLState: 42703
2022-10-11 18:12:42,812 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-3] ERROR: column request0_.dtype does not exist
  Position: 379
2022-10-11 18:12:42,824 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-3] could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet
2022-10-11 18:15:03,793 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:15:03,795 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:15:03,801 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:15:08,720 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 3492 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:15:08,723 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:15:09,292 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:15:09,359 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 61 ms. Found 5 JPA repository interfaces.
2022-10-11 18:15:09,698 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:15:09,704 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:15:09,705 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:15:09,705 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:15:09,802 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:15:09,802 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1047 ms
2022-10-11 18:15:09,912 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:15:09,976 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:15:10,057 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:15:10,129 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:15:10,429 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:15:10,495 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:15:10,558 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:15:10,580 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:15:10,652 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:15:10,710 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:15:11,126 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:15:11,131 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:15:11,685 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:15:11,947 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:15:11,965 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:15:11,973 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:15:11,973 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:15:11,974 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:15:11,991 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:15:12,087 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:15:12,094 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:15:12,097 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:15:12,107 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:15:12,113 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:15:12,683 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.303 seconds (JVM running for 4.977)
2022-10-11 18:15:16,791 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 18:15:16,791 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 18:15:16,792 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 18:15:16,923 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 18:15:16,936 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 18:15:17,060 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 18:15:17,078 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 736 and chatId :834450967
2022-10-11 18:15:19,049 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :5e40eb95316faadb8c44e8
2022-10-11 18:15:19,072 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :DRIVER and token : 5e40eb95316faadb8c44e8 by user : Myachin97
2022-10-11 18:15:19,090 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 18:15:19,108 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: 5e40eb95316faadb8c44e8 with activity : DRIVER
2022-10-11 18:15:19,126 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] SQL Error: 0, SQLState: 42703
2022-10-11 18:15:19,127 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] ERROR: column request0_.dtype does not exist
  Position: 379
2022-10-11 18:15:19,140 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet
2022-10-11 18:28:12,777 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:28:12,779 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:28:12,784 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:28:18,171 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 18200 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:28:18,174 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:28:18,761 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:28:18,820 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2022-10-11 18:28:19,181 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:28:19,188 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:28:19,189 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:28:19,189 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:28:19,278 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:28:19,278 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1071 ms
2022-10-11 18:28:19,400 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:28:19,479 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:28:19,571 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:28:19,688 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:28:20,126 INFO liquibase.logging.core.JavaLogger [main] Creating database history table with name: public.databasechangelog
2022-10-11 18:28:20,164 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:28:20,307 INFO liquibase.logging.core.JavaLogger [main] Table telegram_user created
2022-10-11 18:28:20,310 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.1/2022-09-06-changes-create-table-user.xml::2022-09-06-changes-create-table-userEntity::a.miachyn ran successfully in 30ms
2022-10-11 18:28:20,334 INFO liquibase.logging.core.JavaLogger [main] Table city created
2022-10-11 18:28:20,336 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.2/2022-09-08-changes-create-table-city.xml::2022-09-08-changes-create-table-city::a.miachyn ran successfully in 20ms
2022-10-11 18:28:20,344 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:28:20,347 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:28:20,348 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:28:20,350 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:28:20,352 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:28:20,354 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:28:20,356 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.2/2022-09-08-changes-filling-table-city.xml::2022-09-08-changes-filling-table-city::a.miachyn ran successfully in 15ms
2022-10-11 18:28:20,366 INFO liquibase.logging.core.JavaLogger [main] Custom SQL executed
2022-10-11 18:28:20,368 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.3/2022-09-11-changes-create-type-activity_type.xml::2022-09-11--create-type-activity_type::a.miachyn ran successfully in 8ms
2022-10-11 18:28:20,388 INFO liquibase.logging.core.JavaLogger [main] Table offer created
2022-10-11 18:28:20,391 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.3/2022-09-11-changes-create-table-offer.xml::2022-09-11-changes-create-table-offer::a.miachyn ran successfully in 18ms
2022-10-11 18:28:20,408 INFO liquibase.logging.core.JavaLogger [main] Table offer_city created
2022-10-11 18:28:20,410 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.3/2022-09-11-changes-create-table-offer-city.xml::2022-09-11-changes-create-table-offer_city::a.miachyn ran successfully in 14ms
2022-10-11 18:28:20,415 INFO liquibase.logging.core.JavaLogger [main] Null constraint dropped from telegram_user.first_name
2022-10-11 18:28:20,417 INFO liquibase.logging.core.JavaLogger [main] Null constraint dropped from telegram_user.last_name
2022-10-11 18:28:20,420 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.4/2022-10-03-changes-alter-table-telegram_user.xml::2022-10-03-changes-alter-table-telegram_user::a.miachyn ran successfully in 6ms
2022-10-11 18:28:20,425 INFO liquibase.logging.core.JavaLogger [main] Null constraint dropped from offer.second_date
2022-10-11 18:28:20,427 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.5/2022-10-07-changes-alter-table-offer-second-date.xml::2022-10-07-changes-alter-table-offer-second-date::a.miachyn ran successfully in 3ms
2022-10-11 18:28:20,444 INFO liquibase.logging.core.JavaLogger [main] Table token created
2022-10-11 18:28:20,446 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.6/2022-10-10-changes-create-table-token.xml::2022-10-10-changes-create-table-token::a.miachyn ran successfully in 16ms
2022-10-11 18:28:20,451 INFO liquibase.logging.core.JavaLogger [main] Custom SQL executed
2022-10-11 18:28:20,453 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.7/2022-10-11-changes-create-type-request_type.xml::2022-10-11--create-type-request_type::a.miachyn ran successfully in 4ms
2022-10-11 18:28:20,469 INFO liquibase.logging.core.JavaLogger [main] Table request created
2022-10-11 18:28:20,471 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.7/2022-10-11-changes-create-table-request.xml::2022-10-11-changes-create-table-request::a.miachyn ran successfully in 15ms
2022-10-11 18:28:20,476 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:28:20,546 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:28:20,574 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:28:20,666 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:28:20,728 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:28:21,169 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:28:21,175 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:28:21,780 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:28:22,041 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:28:22,060 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:28:22,067 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:28:22,067 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:28:22,067 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:28:22,085 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:28:22,171 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:28:22,177 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:28:22,180 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:28:22,189 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:28:22,195 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:28:22,755 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.933 seconds (JVM running for 5.68)
2022-10-11 18:29:07,499 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:29:07,501 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:29:07,506 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:29:12,356 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 12376 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:29:12,359 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:29:12,867 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:29:12,932 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 60 ms. Found 5 JPA repository interfaces.
2022-10-11 18:29:13,310 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:29:13,316 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:29:13,316 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:29:13,316 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:29:13,399 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:29:13,399 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1011 ms
2022-10-11 18:29:13,506 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:29:13,565 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:29:13,653 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:29:13,726 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:29:14,067 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:29:14,153 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:29:14,248 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:29:14,299 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:29:14,404 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:29:14,475 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:29:15,029 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:29:15,036 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:29:15,780 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:29:16,089 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:29:16,111 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:29:16,124 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:29:16,124 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:29:16,124 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:29:16,147 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:29:16,247 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:29:16,254 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:29:16,259 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:29:16,269 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:29:16,277 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:29:16,912 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.941 seconds (JVM running for 5.932)
2022-10-11 18:29:23,739 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 18:29:23,739 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 18:29:23,740 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 18:29:23,842 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :5e40eb95316faadb8c44e8
2022-10-11 18:29:23,863 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] class com.godeltech.springgodelbot.model.entity.Token wasn't found by id=5e40eb95316faadb8c44e8
2022-10-11 18:29:23,864 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :5632797057, messageId: 737 and chatId :834450967
2022-10-11 18:29:35,222 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :2b4593a215d051efd72754
2022-10-11 18:29:35,253 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :DRIVER and token : 2b4593a215d051efd72754 by user : Myachin97
2022-10-11 18:29:35,271 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 18:29:35,288 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: 2b4593a215d051efd72754 with activity : DRIVER
2022-10-11 18:29:35,306 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] SQL Error: 0, SQLState: 42703
2022-10-11 18:29:35,306 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] ERROR: column request0_.dtype does not exist
  Hint: Perhaps you meant to reference the column "request0_.type".
  Position: 365
2022-10-11 18:29:35,317 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet
2022-10-11 18:32:12,649 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:32:12,651 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:32:12,657 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:32:17,318 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 10356 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:32:17,322 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:32:17,868 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:32:17,954 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 79 ms. Found 5 JPA repository interfaces.
2022-10-11 18:32:18,408 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:32:18,413 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:32:18,415 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:32:18,415 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:32:18,496 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:32:18,496 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1143 ms
2022-10-11 18:32:18,607 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:32:18,671 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:32:18,755 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:32:18,832 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:32:19,163 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:32:19,245 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:32:19,336 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:32:19,363 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:32:19,448 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:32:19,516 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:32:19,985 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:32:19,990 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:32:20,667 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:32:20,908 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:32:20,925 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:32:20,933 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:32:20,932 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:32:20,934 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:32:20,950 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:32:21,032 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:32:21,039 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:32:21,042 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:32:21,050 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:32:21,056 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:32:21,687 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.708 seconds (JVM running for 5.389)
2022-10-11 18:32:24,838 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 18:32:24,838 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 18:32:24,841 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 3 ms
2022-10-11 18:32:24,993 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :2b4593a215d051efd72754
2022-10-11 18:32:25,025 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] There was an answer on the message with id : 2b4593a215d051efd72754
2022-10-11 18:32:26,607 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-2] Got OFFERS_ACTIVITY callback type
2022-10-11 18:32:26,611 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :2b4593a215d051efd72754
2022-10-11 18:32:26,617 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] There was an answer on the message with id : 2b4593a215d051efd72754
2022-10-11 18:32:29,123 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-3] Got /start message
2022-10-11 18:32:29,135 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-3] Is he member of group?
2022-10-11 18:32:29,250 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-3] Check existing of user by id: 834450967
2022-10-11 18:32:29,300 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-3] Save a new user: UserEntity(id=834450967, firstName=Артем, lastName=Мячин, userName=Myachin97)
2022-10-11 18:32:29,350 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Create new token with userId :834450967, messageId: 739 and chatId :834450967
2022-10-11 18:32:30,702 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Income message with token :bf4f00bdc82dced2abf6f4
2022-10-11 18:32:30,728 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-4] Got ACTIVITY callback type with activity :DRIVER and token : bf4f00bdc82dced2abf6f4 by user : Myachin97
2022-10-11 18:32:30,754 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-4] Find all routes
2022-10-11 18:32:30,772 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Save new request with tokenId: bf4f00bdc82dced2abf6f4 with activity : DRIVER
2022-10-11 18:32:30,793 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-4] SQL Error: 0, SQLState: 42703
2022-10-11 18:32:30,793 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-4] ERROR: column request0_.dtype does not exist
  Hint: Perhaps you meant to reference the column "request0_.type".
  Position: 365
2022-10-11 18:32:30,804 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-4] could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet
2022-10-11 18:35:10,445 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:35:10,447 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:35:10,454 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:35:15,106 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 17432 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:35:15,108 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:35:15,634 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:35:15,691 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2022-10-11 18:35:16,063 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:35:16,071 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:35:16,071 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:35:16,071 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:35:16,184 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:35:16,185 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1048 ms
2022-10-11 18:35:16,307 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:35:16,370 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:35:16,451 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:35:16,520 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:35:16,867 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:35:16,925 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:35:16,929 WARN org.springframework.context.support.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Invocation of init method failed; nested exception is liquibase.exception.ValidationFailedException: Validation Failed:
     2 change sets check sum
          db/changelog/v.0.7/2022-10-11-changes-create-type-request_type.xml::2022-10-11--create-type-request_type::a.miachyn was: 8:22b9813db4295175a63759fb56e6ad05 but is now: 8:85a6e1cea751310f74ac2ce94cd3ed66
          db/changelog/v.0.7/2022-10-11-changes-create-table-request.xml::2022-10-11-changes-create-table-request::a.miachyn was: 8:5197249102ffcc466b8633564e1f9cbd but is now: 8:06e5ed3a903805b5b1f1bfc89fd8cdc4

2022-10-11 18:35:16,929 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2022-10-11 18:35:16,937 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2022-10-11 18:35:16,939 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2022-10-11 18:35:16,948 INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener [main] 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-10-11 18:35:16,968 ERROR org.springframework.boot.SpringApplication [main] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Invocation of init method failed; nested exception is liquibase.exception.ValidationFailedException: Validation Failed:
     2 change sets check sum
          db/changelog/v.0.7/2022-10-11-changes-create-type-request_type.xml::2022-10-11--create-type-request_type::a.miachyn was: 8:22b9813db4295175a63759fb56e6ad05 but is now: 8:85a6e1cea751310f74ac2ce94cd3ed66
          db/changelog/v.0.7/2022-10-11-changes-create-table-request.xml::2022-10-11-changes-create-table-request::a.miachyn was: 8:5197249102ffcc466b8633564e1f9cbd but is now: 8:06e5ed3a903805b5b1f1bfc89fd8cdc4

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.godeltech.springgodelbot.SpringGodelBotApplication.main(SpringGodelBotApplication.java:10)
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     2 change sets check sum
          db/changelog/v.0.7/2022-10-11-changes-create-type-request_type.xml::2022-10-11--create-type-request_type::a.miachyn was: 8:22b9813db4295175a63759fb56e6ad05 but is now: 8:85a6e1cea751310f74ac2ce94cd3ed66
          db/changelog/v.0.7/2022-10-11-changes-create-table-request.xml::2022-10-11-changes-create-table-request::a.miachyn was: 8:5197249102ffcc466b8633564e1f9cbd but is now: 8:06e5ed3a903805b5b1f1bfc89fd8cdc4

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:296)
	at liquibase.Liquibase.lambda$update$1(Liquibase.java:231)
	at liquibase.Scope.lambda$child$0(Scope.java:180)
	at liquibase.Scope.child(Scope.java:189)
	at liquibase.Scope.child(Scope.java:179)
	at liquibase.Scope.child(Scope.java:158)
	at liquibase.Liquibase.runInScope(Liquibase.java:2405)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:197)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:314)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:269)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 18 common frames omitted
2022-10-11 18:35:48,703 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 13900 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:35:48,705 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:35:49,234 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:35:49,310 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 70 ms. Found 5 JPA repository interfaces.
2022-10-11 18:35:49,668 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:35:49,674 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:35:49,674 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:35:49,674 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:35:49,778 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:35:49,778 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1038 ms
2022-10-11 18:35:49,895 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:35:49,960 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:35:50,045 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:35:50,139 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:35:50,384 INFO liquibase.logging.core.JavaLogger [main] Creating database history table with name: public.databasechangelog
2022-10-11 18:35:50,394 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:35:50,504 INFO liquibase.logging.core.JavaLogger [main] Table telegram_user created
2022-10-11 18:35:50,506 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.1/2022-09-06-changes-create-table-user.xml::2022-09-06-changes-create-table-userEntity::a.miachyn ran successfully in 30ms
2022-10-11 18:35:50,529 INFO liquibase.logging.core.JavaLogger [main] Table city created
2022-10-11 18:35:50,531 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.2/2022-09-08-changes-create-table-city.xml::2022-09-08-changes-create-table-city::a.miachyn ran successfully in 17ms
2022-10-11 18:35:50,536 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:35:50,538 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:35:50,539 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:35:50,540 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:35:50,542 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:35:50,543 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 18:35:50,544 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.2/2022-09-08-changes-filling-table-city.xml::2022-09-08-changes-filling-table-city::a.miachyn ran successfully in 9ms
2022-10-11 18:35:50,555 INFO liquibase.logging.core.JavaLogger [main] Custom SQL executed
2022-10-11 18:35:50,557 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.3/2022-09-11-changes-create-type-activity_type.xml::2022-09-11--create-type-activity_type::a.miachyn ran successfully in 9ms
2022-10-11 18:35:50,577 INFO liquibase.logging.core.JavaLogger [main] Table offer created
2022-10-11 18:35:50,579 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.3/2022-09-11-changes-create-table-offer.xml::2022-09-11-changes-create-table-offer::a.miachyn ran successfully in 17ms
2022-10-11 18:35:50,596 INFO liquibase.logging.core.JavaLogger [main] Table offer_city created
2022-10-11 18:35:50,598 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.3/2022-09-11-changes-create-table-offer-city.xml::2022-09-11-changes-create-table-offer_city::a.miachyn ran successfully in 14ms
2022-10-11 18:35:50,603 INFO liquibase.logging.core.JavaLogger [main] Null constraint dropped from telegram_user.first_name
2022-10-11 18:35:50,605 INFO liquibase.logging.core.JavaLogger [main] Null constraint dropped from telegram_user.last_name
2022-10-11 18:35:50,607 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.4/2022-10-03-changes-alter-table-telegram_user.xml::2022-10-03-changes-alter-table-telegram_user::a.miachyn ran successfully in 6ms
2022-10-11 18:35:50,612 INFO liquibase.logging.core.JavaLogger [main] Null constraint dropped from offer.second_date
2022-10-11 18:35:50,614 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.5/2022-10-07-changes-alter-table-offer-second-date.xml::2022-10-07-changes-alter-table-offer-second-date::a.miachyn ran successfully in 4ms
2022-10-11 18:35:50,630 INFO liquibase.logging.core.JavaLogger [main] Table token created
2022-10-11 18:35:50,632 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.6/2022-10-10-changes-create-table-token.xml::2022-10-10-changes-create-table-token::a.miachyn ran successfully in 15ms
2022-10-11 18:35:50,639 INFO liquibase.logging.core.JavaLogger [main] Custom SQL executed
2022-10-11 18:35:50,640 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.7/2022-10-11-changes-create-type-request_type.xml::2022-10-11--create-type-request_type::a.miachyn ran successfully in 4ms
2022-10-11 18:35:50,663 INFO liquibase.logging.core.JavaLogger [main] Table request created
2022-10-11 18:35:50,665 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.7/2022-10-11-changes-create-table-request.xml::2022-10-11-changes-create-table-request::a.miachyn ran successfully in 22ms
2022-10-11 18:35:50,672 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:35:50,744 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:35:50,767 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:35:50,842 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:35:50,906 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:35:51,313 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:35:51,320 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:35:51,850 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:35:52,063 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:35:52,082 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:35:52,089 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:35:52,090 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:35:52,089 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:35:52,109 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:35:52,188 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:35:52,194 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:35:52,197 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:35:52,200 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:35:52,208 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:35:52,730 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.365 seconds (JVM running for 5.043)
2022-10-11 18:36:01,565 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 18:36:01,565 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 18:36:01,566 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 18:36:01,678 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-1] Got OFFERS_ACTIVITY callback type
2022-10-11 18:36:01,682 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :bf4f00bdc82dced2abf6f4
2022-10-11 18:36:01,697 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] class com.godeltech.springgodelbot.model.entity.Token wasn't found by id=bf4f00bdc82dced2abf6f4
2022-10-11 18:36:01,697 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :5632797057, messageId: 740 and chatId :834450967
2022-10-11 18:36:04,664 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :c041158fef9455322b2276
2022-10-11 18:36:04,686 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :PASSENGER and token : c041158fef9455322b2276 by user : Myachin97
2022-10-11 18:36:04,706 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 18:36:04,723 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: c041158fef9455322b2276 with activity : PASSENGER
2022-10-11 18:36:04,737 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] SQL Error: 0, SQLState: 42703
2022-10-11 18:36:04,737 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] ERROR: column request0_.dtype does not exist
  Position: 376
2022-10-11 18:36:04,747 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet
2022-10-11 18:47:16,578 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:47:16,580 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:47:16,588 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:47:21,188 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 22904 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:47:21,190 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:47:21,715 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:47:21,775 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2022-10-11 18:47:22,120 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:47:22,126 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:47:22,126 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:47:22,126 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:47:22,209 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:47:22,209 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 990 ms
2022-10-11 18:47:22,313 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:47:22,373 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:47:22,461 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:47:22,538 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:47:22,838 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:47:22,907 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:47:22,974 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:47:22,997 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:47:23,074 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:47:23,140 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:47:23,568 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:47:23,574 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:47:24,134 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:47:24,354 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:47:24,372 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:47:24,380 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:47:24,380 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:47:24,381 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:47:24,400 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:47:24,482 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:47:24,487 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:47:24,490 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:47:24,497 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:47:24,504 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:47:25,052 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.212 seconds (JVM running for 4.961)
2022-10-11 18:47:37,621 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 18:47:37,621 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 18:47:37,622 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 18:47:37,723 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 18:47:37,729 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 18:47:37,810 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 18:47:37,837 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Save a new user: UserEntity(id=834450967, firstName=Артем, lastName=Мячин, userName=Myachin97)
2022-10-11 18:47:37,883 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 742 and chatId :834450967
2022-10-11 18:47:39,284 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :5e466b87ed053a5dad0089
2022-10-11 18:47:39,306 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :PASSENGER and token : 5e466b87ed053a5dad0089 by user : Myachin97
2022-10-11 18:47:39,324 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 18:47:39,342 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: 5e466b87ed053a5dad0089 with activity : PASSENGER
2022-10-11 18:47:39,366 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] class java.util.LinkedHashSet cannot be cast to class [Ljava.lang.String; (java.util.LinkedHashSet and [Ljava.lang.String; are in module java.base of loader 'bootstrap')
2022-10-11 18:50:56,209 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:50:56,211 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:50:56,216 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 18:51:00,018 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 12276 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 18:51:00,023 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 18:51:00,630 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 18:51:00,703 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 65 ms. Found 5 JPA repository interfaces.
2022-10-11 18:51:01,133 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 18:51:01,142 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 18:51:01,142 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 18:51:01,143 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 18:51:01,242 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 18:51:01,243 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1172 ms
2022-10-11 18:51:01,405 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 18:51:01,479 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 18:51:01,583 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 18:51:01,679 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 18:51:02,040 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 18:51:02,126 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 18:51:02,214 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 18:51:02,249 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 18:51:02,356 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 18:51:02,434 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 18:51:02,939 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 18:51:02,947 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:51:03,647 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 18:51:03,951 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 18:51:03,974 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 18:51:03,982 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:51:03,983 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:51:03,984 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 18:51:03,997 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 18:51:04,089 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 18:51:04,094 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 18:51:04,098 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 18:51:04,102 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 18:51:04,110 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 18:51:04,816 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 5.211 seconds (JVM running for 6.35)
2022-10-11 18:51:09,118 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 18:51:09,118 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 18:51:09,119 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 18:51:09,277 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 18:51:09,284 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 18:51:09,401 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 18:51:09,416 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 744 and chatId :834450967
2022-10-11 18:51:11,309 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :f84581820c566a8428af19
2022-10-11 18:51:11,345 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :PASSENGER and token : f84581820c566a8428af19 by user : Myachin97
2022-10-11 18:51:11,397 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 18:51:11,416 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: f84581820c566a8428af19 with activity : PASSENGER
2022-10-11 18:51:27,016 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] class java.util.LinkedHashSet cannot be cast to class [Ljava.lang.String; (java.util.LinkedHashSet and [Ljava.lang.String; are in module java.base of loader 'bootstrap')
2022-10-11 18:55:33,569 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 18:55:33,573 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 18:55:33,582 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:02:50,310 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 16400 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:02:50,313 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:02:50,909 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:02:50,977 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 61 ms. Found 5 JPA repository interfaces.
2022-10-11 19:02:51,334 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:02:51,340 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:02:51,340 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:02:51,340 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:02:51,448 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:02:51,448 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1103 ms
2022-10-11 19:02:51,580 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:02:51,643 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:02:51,722 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:02:51,805 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:02:52,106 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:02:52,171 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:02:52,239 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:02:52,263 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:02:52,337 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:02:52,400 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:02:52,787 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:02:52,793 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:02:53,318 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:02:53,541 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:02:53,558 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:02:53,566 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:02:53,566 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:02:53,567 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:02:53,584 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:02:53,668 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:02:53,674 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:02:53,678 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:02:53,681 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:02:53,690 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:02:55,341 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 5.372 seconds (JVM running for 6.076)
2022-10-11 19:02:59,525 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:02:59,525 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:02:59,526 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 0 ms
2022-10-11 19:02:59,646 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 19:02:59,661 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 19:02:59,825 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 19:02:59,836 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 746 and chatId :834450967
2022-10-11 19:03:00,984 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :1144569485253d433b983b
2022-10-11 19:03:01,006 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :PASSENGER and token : 1144569485253d433b983b by user : Myachin97
2022-10-11 19:03:01,027 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 19:03:01,044 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: 1144569485253d433b983b with activity : PASSENGER
2022-10-11 19:03:01,071 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] class java.util.ArrayList cannot be cast to class [Ljava.lang.String; (java.util.ArrayList and [Ljava.lang.String; are in module java.base of loader 'bootstrap')
2022-10-11 19:10:48,784 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:10:48,786 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 19:10:48,791 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:10:58,184 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 1344 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:10:58,187 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:10:58,884 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:10:58,955 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 64 ms. Found 5 JPA repository interfaces.
2022-10-11 19:10:59,388 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:10:59,396 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:10:59,396 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:10:59,397 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:10:59,493 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:10:59,494 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1260 ms
2022-10-11 19:10:59,620 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:10:59,685 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:10:59,792 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:10:59,884 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:11:00,263 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:11:00,346 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:11:00,426 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:11:00,454 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:11:00,541 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:11:00,611 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:11:01,145 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:11:01,153 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:11:01,818 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:11:02,082 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:11:02,101 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:11:02,111 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:11:02,111 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:11:02,112 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:11:02,131 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:11:02,244 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:11:02,252 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:11:02,255 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:11:02,259 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:11:02,269 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:11:03,224 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 5.427 seconds (JVM running for 6.164)
2022-10-11 19:11:06,352 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:11:06,353 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:11:06,354 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 19:11:06,486 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 19:11:06,505 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 19:11:06,685 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 19:11:06,702 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 748 and chatId :834450967
2022-10-11 19:11:09,149 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :b2476b96da8c40f6dc7026
2022-10-11 19:11:09,183 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :PASSENGER and token : b2476b96da8c40f6dc7026 by user : Myachin97
2022-10-11 19:11:09,203 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 19:11:09,221 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: b2476b96da8c40f6dc7026 with activity : PASSENGER
2022-10-11 19:11:12,316 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-3] Callback data with type: PASSENGER_ROUTE and routeId: 3 and with token: b2476b96da8c40f6dc7026
2022-10-11 19:11:12,366 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by token id : b2476b96da8c40f6dc7026
2022-10-11 19:11:12,392 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Update request with id : 1
2022-10-11 19:11:12,393 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by id : 1
2022-10-11 19:11:13,175 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-4] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: b2476b96da8c40f6dc7026
2022-10-11 19:11:13,181 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : b2476b96da8c40f6dc7026
2022-10-11 19:11:13,191 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Update request with id : 1
2022-10-11 19:11:13,191 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by id : 1
2022-10-11 19:11:18,163 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-5] Callback data with type: CHOSE_DATE_PASSENGER with token : b2476b96da8c40f6dc7026 by user :Myachin97
2022-10-11 19:11:18,168 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : b2476b96da8c40f6dc7026
2022-10-11 19:11:20,113 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-7] Got FIRST_DATE_PASSENGER type with first date :2022-11-01 with token: b2476b96da8c40f6dc7026
2022-10-11 19:11:20,117 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : b2476b96da8c40f6dc7026
2022-10-11 19:11:20,127 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Update request with id : 1
2022-10-11 19:11:20,127 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by id : 1
2022-10-11 19:11:21,093 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SecondDatePassengerCallbackType [http-nio-5000-exec-6] Got SECOND_DATE_PASSENGER callback type with second date :2022-11-02 and token : b2476b96da8c40f6dc7026 by user : Myachin97
2022-10-11 19:11:21,097 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : b2476b96da8c40f6dc7026
2022-10-11 19:11:21,107 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Update request with id : 1
2022-10-11 19:11:21,108 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by id : 1
2022-10-11 19:11:22,275 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FinishDatePassengerCallbackType [http-nio-5000-exec-8] Callback : FINISH_CHOSE_DATE_PASSENGER type with token : b2476b96da8c40f6dc7026 by user : Myachin97
2022-10-11 19:11:22,281 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : b2476b96da8c40f6dc7026
2022-10-11 19:11:22,295 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-8] Find drivers by first date :2022-11-01 and second date:2022-11-02 with cities:[WROCLAW, BREST]
2022-10-11 19:11:24,810 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CheckPassengerCallbackType [http-nio-5000-exec-9] Got callback with type : CHECK_PASSENGER_REQUEST with token : b2476b96da8c40f6dc7026
2022-10-11 19:11:24,815 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : b2476b96da8c40f6dc7026
2022-10-11 19:11:24,827 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Prepare request with id :1 and user id : 834450967 for save with description
2022-10-11 19:11:24,842 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-9] SQL Error: 0, SQLState: 42601
2022-10-11 19:11:24,842 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-9] ERROR: syntax error at or near "FROM"
  Position: 56
2022-10-11 19:11:24,856 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-9] could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute statement
2022-10-11 19:26:49,587 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:26:49,589 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 19:26:49,595 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:26:53,641 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 16432 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:26:53,644 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:26:54,205 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:26:54,264 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2022-10-11 19:26:54,616 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:26:54,625 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:26:54,626 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:26:54,626 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:26:54,736 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:26:54,737 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1058 ms
2022-10-11 19:26:54,851 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:26:54,915 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:26:54,995 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:26:55,063 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:26:55,391 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:26:55,467 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:26:55,533 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:26:55,563 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:26:55,669 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:26:55,742 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:26:56,249 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:26:56,256 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:26:56,923 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:26:57,159 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:26:57,175 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:26:57,183 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:26:57,183 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:26:57,184 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:26:57,200 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:26:57,290 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:26:57,295 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:26:57,297 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:26:57,304 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:26:57,309 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:26:58,033 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.741 seconds (JVM running for 5.439)
2022-10-11 19:27:01,202 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:27:01,202 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:27:01,204 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 2 ms
2022-10-11 19:27:01,341 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CancelPassengerRequestCallbackType [http-nio-5000-exec-1] Got callback : CANCEL_PASSENGER_REQUEST with token : b2476b96da8c40f6dc7026
2022-10-11 19:27:01,355 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : b2476b96da8c40f6dc7026
2022-10-11 19:27:01,398 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Delete request with id : 1
2022-10-11 19:27:01,399 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by id : 1
2022-10-11 19:27:01,596 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 749 and chatId :834450967
2022-10-11 19:27:06,480 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :544b13a79fd349fdc96a31
2022-10-11 19:27:06,508 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-3] Got ACTIVITY callback type with activity :DRIVER and token : 544b13a79fd349fdc96a31 by user : Myachin97
2022-10-11 19:27:06,532 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-3] Find all routes
2022-10-11 19:27:06,543 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Save new request with tokenId: 544b13a79fd349fdc96a31 with activity : DRIVER
2022-10-11 19:27:07,518 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-2] Callback data with type: DRIVER_ROUTE and routeId: 4 and token: 544b13a79fd349fdc96a31 by user : Myachin97
2022-10-11 19:27:07,524 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by token id : 544b13a79fd349fdc96a31
2022-10-11 19:27:07,537 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Update request with id : 2
2022-10-11 19:27:07,537 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by id : 2
2022-10-11 19:27:08,254 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-4] Callback data with type: DRIVER_ROUTE and routeId: 5 and token: 544b13a79fd349fdc96a31 by user : Myachin97
2022-10-11 19:27:08,258 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : 544b13a79fd349fdc96a31
2022-10-11 19:27:08,271 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Update request with id : 2
2022-10-11 19:27:08,272 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by id : 2
2022-10-11 19:27:09,134 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.ChoseDateDriverCallbackType [http-nio-5000-exec-5] Callback data with type: CHOSE_DATE_DRIVER with token : 544b13a79fd349fdc96a31 by user :User(id=834450967, firstName=Артем, isBot=false, lastName=Мячин, userName=Myachin97, languageCode=en, canJoinGroups=null, canReadAllGroupMessages=null, supportInlineQueries=null)
2022-10-11 19:27:09,138 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 544b13a79fd349fdc96a31
2022-10-11 19:27:10,366 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.FirstDateDriverCallbackType [http-nio-5000-exec-6] Got FIRST_DATE_DRIVER callback type with first date :2022-11-04 with token: 544b13a79fd349fdc96a31
2022-10-11 19:27:10,370 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 544b13a79fd349fdc96a31
2022-10-11 19:27:10,383 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Update request with id : 2
2022-10-11 19:27:10,383 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by id : 2
2022-10-11 19:27:14,488 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 544b13a79fd349fdc96a31
2022-10-11 19:27:14,499 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Find passengers by first date :2022-11-04 and second date:null with cities:[GDANSK, BREST]
2022-10-11 19:27:16,402 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CheckDriverCallbackType [http-nio-5000-exec-8] Got callback type :CHECK_DRIVER_REQUEST with token :544b13a79fd349fdc96a31 by user : Myachin97
2022-10-11 19:27:16,406 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 544b13a79fd349fdc96a31
2022-10-11 19:27:16,415 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Prepare request with id :2 and user id : 834450967 for save with description
2022-10-11 19:27:16,427 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-8] SQL Error: 0, SQLState: 42712
2022-10-11 19:27:16,428 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-8] ERROR: table name "request" specified more than once
2022-10-11 19:27:16,440 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-8] could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute statement
2022-10-11 19:30:42,210 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:30:42,212 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 19:30:42,219 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:30:46,169 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 12448 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:30:46,173 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:30:46,755 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:30:46,836 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 74 ms. Found 5 JPA repository interfaces.
2022-10-11 19:30:47,195 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:30:47,201 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:30:47,201 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:30:47,202 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:30:47,293 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:30:47,293 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1085 ms
2022-10-11 19:30:47,403 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:30:47,466 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:30:47,584 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:30:47,687 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:30:48,018 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:30:48,116 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:30:48,194 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:30:48,225 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:30:48,312 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:30:48,377 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:30:48,861 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:30:48,868 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:30:49,465 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:30:49,792 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:30:49,818 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:30:49,832 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:30:49,834 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:30:49,834 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:30:49,855 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:30:49,997 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:30:50,006 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:30:50,011 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:30:50,016 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:30:50,025 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:30:51,187 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 5.377 seconds (JVM running for 6.119)
2022-10-11 19:30:51,596 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:30:51,596 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-2] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:30:51,598 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-2] Completed initialization in 2 ms
2022-10-11 19:30:51,718 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CheckDriverCallbackType [http-nio-5000-exec-2] Got callback type :CHECK_DRIVER_REQUEST with token :544b13a79fd349fdc96a31 by user : Myachin97
2022-10-11 19:30:51,726 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by token id : 544b13a79fd349fdc96a31
2022-10-11 19:30:51,774 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Prepare request with id :2 and user id : 834450967 for save with description
2022-10-11 19:30:51,830 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] SQL Error: 0, SQLState: 42P01
2022-10-11 19:30:51,832 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] ERROR: relation "r" does not exist
  Position: 8
2022-10-11 19:30:51,847 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute statement
2022-10-11 19:31:00,228 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:31:00,230 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 19:31:00,236 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:31:04,039 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 22656 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:31:04,042 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:31:04,560 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:31:04,620 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 53 ms. Found 5 JPA repository interfaces.
2022-10-11 19:31:05,014 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:31:05,022 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:31:05,022 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:31:05,022 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:31:05,130 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:31:05,131 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1055 ms
2022-10-11 19:31:05,253 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:31:05,316 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:31:05,409 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:31:05,493 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:31:05,819 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:31:05,899 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:31:06,070 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:31:06,117 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:31:06,257 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:31:06,356 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:31:06,939 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:31:06,948 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:31:07,771 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:31:08,090 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:31:08,110 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:31:08,119 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:31:08,121 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:31:08,122 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:31:08,142 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:31:08,236 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:31:08,243 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:31:08,246 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:31:08,254 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:31:08,259 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:31:09,304 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 5.605 seconds (JVM running for 6.28)
2022-10-11 19:31:09,391 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:31:09,391 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:31:09,393 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 19:31:09,512 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CheckDriverCallbackType [http-nio-5000-exec-1] Got callback type :CHECK_DRIVER_REQUEST with token :544b13a79fd349fdc96a31 by user : Myachin97
2022-10-11 19:31:09,520 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 544b13a79fd349fdc96a31
2022-10-11 19:31:09,555 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Prepare request with id :2 and user id : 834450967 for save with description
2022-10-11 19:31:16,413 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-2] Is he member of group?
2022-10-11 19:31:16,621 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Find request for saving with user id : 834450967
2022-10-11 19:31:16,633 INFO com.godeltech.springgodelbot.resolver.message.type.impl.OnlyTextMessageType [http-nio-5000-exec-2] Got message for saving description of driver with token :544b13a79fd349fdc96a31 
2022-10-11 19:31:16,815 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Save supplier by: Request(id=2, offerId=null, cities=[GDANSK, BREST], firstDate=2022-11-04, secondDate=null, needForDescription=true, token=com.godeltech.springgodelbot.model.entity.Token@45e184d9, activity=DRIVER, description=Yap yap)
2022-10-11 19:31:16,868 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Delete request with id : 2
2022-10-11 19:31:16,868 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by id : 2
2022-10-11 19:31:16,883 INFO org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl [http-nio-5000-exec-2] HHH000010: On release of batch it still contained JDBC statements
2022-10-11 19:31:16,886 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.godeltech.springgodelbot.model.entity.City; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.godeltech.springgodelbot.model.entity.City
2022-10-11 19:34:39,309 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-4] Got /start message
2022-10-11 19:34:39,310 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-4] Is he member of group?
2022-10-11 19:34:39,634 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-4] Check existing of user by id: 834450967
2022-10-11 19:34:39,648 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Create new token with userId :834450967, messageId: 752 and chatId :834450967
2022-10-11 19:34:40,647 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-5] Income message with token :3d4491b026ce3c7eab77c8
2022-10-11 19:34:40,671 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-5] Got ACTIVITY callback type with activity :PASSENGER and token : 3d4491b026ce3c7eab77c8 by user : Myachin97
2022-10-11 19:34:40,693 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-5] Find all routes
2022-10-11 19:34:40,709 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Save new request with tokenId: 3d4491b026ce3c7eab77c8 with activity : PASSENGER
2022-10-11 19:34:41,498 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-6] Callback data with type: PASSENGER_ROUTE and routeId: 4 and with token: 3d4491b026ce3c7eab77c8
2022-10-11 19:34:41,536 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:34:41,552 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Update request with id : 3
2022-10-11 19:34:41,553 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by id : 3
2022-10-11 19:34:42,581 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-7] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: 3d4491b026ce3c7eab77c8
2022-10-11 19:34:42,586 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:34:42,595 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Update request with id : 3
2022-10-11 19:34:42,596 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by id : 3
2022-10-11 19:34:43,553 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-8] Callback data with type: CHOSE_DATE_PASSENGER with token : 3d4491b026ce3c7eab77c8 by user :Myachin97
2022-10-11 19:34:43,557 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:34:44,584 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-9] Got FIRST_DATE_PASSENGER type with first date :2022-11-05 with token: 3d4491b026ce3c7eab77c8
2022-10-11 19:34:44,588 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:34:44,596 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Update request with id : 3
2022-10-11 19:34:44,597 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by id : 3
2022-10-11 19:34:48,636 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FinishDatePassengerCallbackType [http-nio-5000-exec-10] Callback : FINISH_CHOSE_DATE_PASSENGER type with token : 3d4491b026ce3c7eab77c8 by user : Myachin97
2022-10-11 19:34:48,642 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:34:48,651 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Find drivers by first date :2022-11-05 and second date:null with cities:[GDANSK, BREST]
2022-10-11 19:34:50,413 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CheckPassengerCallbackType [http-nio-5000-exec-1] Got callback with type : CHECK_PASSENGER_REQUEST with token : 3d4491b026ce3c7eab77c8
2022-10-11 19:34:50,418 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:34:50,430 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Prepare request with id :3 and user id : 834450967 for save with description
2022-10-11 19:34:51,422 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SavePassengerWithoutDescriptionCallbackType [http-nio-5000-exec-2] Got callback with type : SAVE_PASSENGER_WITHOUT_DESCRIPTION with token : 3d4491b026ce3c7eab77c8
2022-10-11 19:34:51,428 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:34:51,439 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Save passenger request : Request(id=3, offerId=null, cities=[GDANSK, BREST], firstDate=2022-11-05, secondDate=null, needForDescription=true, token=com.godeltech.springgodelbot.model.entity.Token@166d7960, activity=PASSENGER, description=null)
2022-10-11 19:34:51,453 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Delete request with id : 3
2022-10-11 19:34:51,453 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by id : 3
2022-10-11 19:34:51,456 INFO org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl [http-nio-5000-exec-2] HHH000010: On release of batch it still contained JDBC statements
2022-10-11 19:34:51,457 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.godeltech.springgodelbot.model.entity.City; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.godeltech.springgodelbot.model.entity.City
2022-10-11 19:36:34,907 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:36:34,910 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 19:36:34,917 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:36:39,870 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 6152 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:36:39,875 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:36:40,477 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:36:40,569 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 84 ms. Found 5 JPA repository interfaces.
2022-10-11 19:36:41,022 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:36:41,030 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:36:41,030 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:36:41,030 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:36:41,131 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:36:41,131 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1223 ms
2022-10-11 19:36:41,275 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:36:41,351 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:36:41,445 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:36:41,535 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:36:41,902 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:36:41,997 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:36:42,081 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:36:42,111 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:36:42,208 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:36:42,280 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:36:42,813 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:36:42,823 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:36:43,557 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:36:43,868 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:36:43,895 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:36:43,906 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:36:43,907 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:36:43,908 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:36:43,923 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:36:44,025 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:36:44,031 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:36:44,035 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:36:44,043 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:36:44,047 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:36:44,864 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 5.554 seconds (JVM running for 6.578)
2022-10-11 19:36:47,723 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:36:47,723 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:36:47,724 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 19:36:47,882 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SavePassengerWithoutDescriptionCallbackType [http-nio-5000-exec-1] Got callback with type : SAVE_PASSENGER_WITHOUT_DESCRIPTION with token : 3d4491b026ce3c7eab77c8
2022-10-11 19:36:47,890 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:37:17,961 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-1] Save passenger request : Request(id=3, offerId=null, cities=[GDANSK, BREST], firstDate=2022-11-05, secondDate=null, needForDescription=true, token=com.godeltech.springgodelbot.model.entity.Token@7a1ce38e, activity=PASSENGER, description=null)
2022-10-11 19:38:11,621 WARN com.zaxxer.hikari.pool.HikariPool$HouseKeeper [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=53s660ms844µs100ns).
2022-10-11 19:38:11,621 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Delete request with id : 3
2022-10-11 19:38:11,623 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by id : 3
2022-10-11 19:38:11,627 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SavePassengerWithoutDescriptionCallbackType [http-nio-5000-exec-2] Got callback with type : SAVE_PASSENGER_WITHOUT_DESCRIPTION with token : 3d4491b026ce3c7eab77c8
2022-10-11 19:38:13,613 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:38:32,764 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Save passenger request : Request(id=3, offerId=null, cities=[GDANSK, BREST], firstDate=2022-11-05, secondDate=null, needForDescription=true, token=com.godeltech.springgodelbot.model.entity.Token@3d75350e, activity=PASSENGER, description=null)
2022-10-11 19:38:36,335 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Delete request with id : 3
2022-10-11 19:38:36,336 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by id : 3
2022-10-11 19:38:38,251 INFO org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl [http-nio-5000-exec-2] HHH000010: On release of batch it still contained JDBC statements
2022-10-11 19:38:38,251 INFO org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl [http-nio-5000-exec-1] HHH000010: On release of batch it still contained JDBC statements
2022-10-11 19:38:38,255 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.godeltech.springgodelbot.model.entity.City; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.godeltech.springgodelbot.model.entity.City
2022-10-11 19:38:38,255 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.godeltech.springgodelbot.model.entity.City; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.godeltech.springgodelbot.model.entity.City
2022-10-11 19:42:29,073 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:42:29,076 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 19:42:29,081 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:42:34,189 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 15828 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:42:34,191 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:42:34,769 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:42:34,841 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 65 ms. Found 5 JPA repository interfaces.
2022-10-11 19:42:35,187 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:42:35,193 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:42:35,193 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:42:35,194 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:42:35,275 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:42:35,275 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1046 ms
2022-10-11 19:42:35,380 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:42:35,445 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:42:35,529 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:42:35,624 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:42:36,004 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:42:36,087 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:42:36,160 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:42:36,190 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:42:36,266 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:42:36,327 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:42:36,797 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:42:36,805 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:42:37,443 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:42:37,725 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:42:37,742 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:42:37,752 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:42:37,751 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:42:37,754 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:42:37,772 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:42:37,897 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:42:37,907 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:42:37,910 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:42:37,914 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:42:37,925 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:42:38,541 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.751 seconds (JVM running for 5.438)
2022-10-11 19:42:39,871 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:42:39,871 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:42:39,872 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 19:42:40,002 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SavePassengerWithoutDescriptionCallbackType [http-nio-5000-exec-1] Got callback with type : SAVE_PASSENGER_WITHOUT_DESCRIPTION with token : 3d4491b026ce3c7eab77c8
2022-10-11 19:42:40,008 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 3d4491b026ce3c7eab77c8
2022-10-11 19:42:40,072 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-1] Save passenger request : Request(id=3, offerId=null, cities=[GDANSK, BREST], firstDate=2022-11-05, secondDate=null, needForDescription=true, token=com.godeltech.springgodelbot.model.entity.Token@217e06aa, activity=PASSENGER, description=null)
2022-10-11 19:42:40,150 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Delete request with id : 3
2022-10-11 19:42:40,375 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 753 and chatId :834450967
2022-10-11 19:43:11,090 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:43:11,092 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 19:43:11,098 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:43:15,024 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 1292 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:43:15,027 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:43:15,572 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:43:15,632 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2022-10-11 19:43:15,976 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:43:15,981 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:43:15,981 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:43:15,981 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:43:16,074 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:43:16,074 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1009 ms
2022-10-11 19:43:16,183 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:43:16,247 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:43:16,329 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:43:16,409 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:43:16,696 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:43:16,771 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:43:16,833 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:43:16,857 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:43:16,934 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:43:16,991 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:43:17,397 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:43:17,402 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:43:17,972 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:43:18,230 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:43:18,247 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:43:18,254 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:43:18,254 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:43:18,256 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:43:18,273 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:43:18,364 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:43:18,369 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:43:18,372 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:43:18,380 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:43:18,385 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:43:19,093 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.425 seconds (JVM running for 5.168)
2022-10-11 19:43:20,956 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:43:20,956 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:43:20,957 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 19:43:21,100 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 19:43:21,109 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 19:43:21,239 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 19:43:21,253 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 754 and chatId :834450967
2022-10-11 19:43:23,076 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :5e4b8e88fc9873bce4e848
2022-10-11 19:43:23,097 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-2] Got ACTIVITY callback type with activity :PASSENGER and token : 5e4b8e88fc9873bce4e848 by user : Myachin97
2022-10-11 19:43:23,116 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-2] Find all routes
2022-10-11 19:43:23,136 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: 5e4b8e88fc9873bce4e848 with activity : PASSENGER
2022-10-11 19:43:24,420 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-3] Callback data with type: PASSENGER_ROUTE and routeId: 4 and with token: 5e4b8e88fc9873bce4e848
2022-10-11 19:43:24,428 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by token id : 5e4b8e88fc9873bce4e848
2022-10-11 19:43:24,451 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Update request with id : 4
2022-10-11 19:43:24,452 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by id : 4
2022-10-11 19:43:25,013 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-4] Callback data with type: PASSENGER_ROUTE and routeId: 6 and with token: 5e4b8e88fc9873bce4e848
2022-10-11 19:43:25,019 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : 5e4b8e88fc9873bce4e848
2022-10-11 19:43:25,031 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Update request with id : 4
2022-10-11 19:43:25,032 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by id : 4
2022-10-11 19:43:25,777 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-5] Callback data with type: CHOSE_DATE_PASSENGER with token : 5e4b8e88fc9873bce4e848 by user :Myachin97
2022-10-11 19:43:25,781 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 5e4b8e88fc9873bce4e848
2022-10-11 19:43:26,857 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-6] Got FIRST_DATE_PASSENGER type with first date :2022-11-02 with token: 5e4b8e88fc9873bce4e848
2022-10-11 19:43:26,862 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 5e4b8e88fc9873bce4e848
2022-10-11 19:43:26,874 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Update request with id : 4
2022-10-11 19:43:26,874 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by id : 4
2022-10-11 19:43:31,100 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SecondDatePassengerCallbackType [http-nio-5000-exec-7] Got SECOND_DATE_PASSENGER callback type with second date :2022-11-06 and token : 5e4b8e88fc9873bce4e848 by user : Myachin97
2022-10-11 19:43:31,102 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 5e4b8e88fc9873bce4e848
2022-10-11 19:43:31,111 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Update request with id : 4
2022-10-11 19:43:31,112 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by id : 4
2022-10-11 19:43:34,442 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FinishDatePassengerCallbackType [http-nio-5000-exec-8] Callback : FINISH_CHOSE_DATE_PASSENGER type with token : 5e4b8e88fc9873bce4e848 by user : Myachin97
2022-10-11 19:43:34,447 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 5e4b8e88fc9873bce4e848
2022-10-11 19:43:34,460 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-8] Find drivers by first date :2022-11-02 and second date:2022-11-06 with cities:[GDANSK, GRODNO]
2022-10-11 19:43:36,175 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CheckPassengerCallbackType [http-nio-5000-exec-9] Got callback with type : CHECK_PASSENGER_REQUEST with token : 5e4b8e88fc9873bce4e848
2022-10-11 19:43:36,181 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : 5e4b8e88fc9873bce4e848
2022-10-11 19:43:36,192 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Prepare request with id :4 and user id : 834450967 for save with description
2022-10-11 19:43:40,572 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-10] Is he member of group?
2022-10-11 19:43:40,662 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Find request for saving with user id : 834450967
2022-10-11 19:43:40,681 INFO com.godeltech.springgodelbot.resolver.message.type.impl.OnlyTextMessageType [http-nio-5000-exec-10] Got message for saving description of passenger with token :5e4b8e88fc9873bce4e848 
2022-10-11 19:43:40,699 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Save passenger request : Request(id=4, offerId=null, cities=[GDANSK, GRODNO], firstDate=2022-11-02, secondDate=2022-11-06, needForDescription=true, token=com.godeltech.springgodelbot.model.entity.Token@47a4007e, activity=PASSENGER, description=Yap yap yap)
2022-10-11 19:43:40,750 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Delete request with id : 4
2022-10-11 19:43:40,961 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Create new token with userId :834450967 and chatId :834450967
2022-10-11 19:43:46,480 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-1] Got OFFERS_ACTIVITY callback type
2022-10-11 19:43:46,483 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :d447f891f566001ae66eab
2022-10-11 19:43:47,274 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-2] Callback with type :MY_OFFERS and activity : PASSENGER and token: d447f891f566001ae66eab
2022-10-11 19:43:47,279 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 19:43:48,429 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-3] Got CHANGE_OFFER callback type with route id :6 and token: d447f891f566001ae66eab by user :Myachin97
2022-10-11 19:43:48,434 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-3] Find offer by id : 6
2022-10-11 19:43:50,201 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.DeleteOfferCallbackType [http-nio-5000-exec-4] Delete offer by id :6 and token: d447f891f566001ae66eab
2022-10-11 19:43:50,205 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : d447f891f566001ae66eab
2022-10-11 19:43:50,212 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-4] Delete offer by id : 6
2022-10-11 19:43:50,213 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-4] Get offer by id: 6
2022-10-11 19:43:50,217 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Delete request with id : 5
2022-10-11 19:43:50,221 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Create new token with userId :834450967, messageId: 757 and chatId :834450967
2022-10-11 19:43:55,909 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-5] Got OFFERS_ACTIVITY callback type
2022-10-11 19:43:55,914 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-5] Income message with token :494982ac36743f5fb07dc9
2022-10-11 19:43:58,161 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-6] Callback with type :MY_OFFERS and activity : PASSENGER and token: 494982ac36743f5fb07dc9
2022-10-11 19:43:58,166 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-6] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 19:43:59,020 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-7] Got CHANGE_OFFER callback type with route id :5 and token: 494982ac36743f5fb07dc9 by user :Myachin97
2022-10-11 19:43:59,024 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Find offer by id : 5
2022-10-11 19:44:00,461 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeDateOfOfferCallbackType [http-nio-5000-exec-8] Got CHANGE_DATE_OF_OFFER type with token: 494982ac36743f5fb07dc9
2022-10-11 19:44:00,466 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 494982ac36743f5fb07dc9
2022-10-11 19:44:00,475 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeDateOfOfferCallbackType [http-nio-5000-exec-8] Change date of offer with id:5, with token :494982ac36743f5fb07dc9
2022-10-11 19:44:03,733 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeSecondDateOfOfferCallbackType [http-nio-5000-exec-9] Change date of offer with date :2022-11-02 with token: 494982ac36743f5fb07dc9
2022-10-11 19:44:03,738 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : 494982ac36743f5fb07dc9
2022-10-11 19:44:03,747 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Update request with id : 6
2022-10-11 19:44:03,747 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by id : 6
2022-10-11 19:44:05,564 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.FinishChangeDateOfferCallbackType [http-nio-5000-exec-10] Got FINISH_DATE_OFFER callback type with token : 494982ac36743f5fb07dc9
2022-10-11 19:44:05,569 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by token id : 494982ac36743f5fb07dc9
2022-10-11 19:44:05,580 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Update date of offer with first date : 2022-11-02 , and second date : 2022-11-05 
2022-10-11 19:44:05,580 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Get offer by id: 5
2022-10-11 19:44:05,595 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Find drivers by first date :2022-11-02 and second date:2022-11-05 with cities:[GDANSK, BREST]
2022-10-11 19:44:09,366 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-1] Got MAIN_MENU callback type
2022-10-11 19:44:09,367 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 19:44:09,461 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 19:44:09,469 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Delete token from messages : 494982ac36743f5fb07dc9
2022-10-11 19:44:09,480 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-1] SQL Error: 0, SQLState: 23503
2022-10-11 19:44:09,481 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-1] ERROR: update or delete on table "token" violates foreign key constraint "fk_request_token" on table "request"
  Detail: Key (id)=(494982ac36743f5fb07dc9) is still referenced from table "request".
2022-10-11 19:44:09,483 INFO org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl [http-nio-5000-exec-1] HHH000010: On release of batch it still contained JDBC statements
2022-10-11 19:44:09,489 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] could not execute statement; SQL [n/a]; constraint [fk_request_token]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
2022-10-11 19:44:24,768 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-2] Got MAIN_MENU callback type
2022-10-11 19:44:24,770 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-2] Is he member of group?
2022-10-11 19:44:24,857 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-2] Check existing of user by id: 834450967
2022-10-11 19:44:24,864 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Delete token from messages : 494982ac36743f5fb07dc9
2022-10-11 19:44:24,872 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] SQL Error: 0, SQLState: 23503
2022-10-11 19:44:24,872 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] ERROR: update or delete on table "token" violates foreign key constraint "fk_request_token" on table "request"
  Detail: Key (id)=(494982ac36743f5fb07dc9) is still referenced from table "request".
2022-10-11 19:44:24,872 INFO org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl [http-nio-5000-exec-2] HHH000010: On release of batch it still contained JDBC statements
2022-10-11 19:44:24,874 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] could not execute statement; SQL [n/a]; constraint [fk_request_token]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
2022-10-11 19:46:23,764 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:46:23,766 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 19:46:23,775 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:46:27,761 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 19036 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:46:27,764 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:46:28,354 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:46:28,424 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 60 ms. Found 5 JPA repository interfaces.
2022-10-11 19:46:28,770 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:46:28,778 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:46:28,778 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:46:28,778 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:46:28,895 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:46:28,895 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1090 ms
2022-10-11 19:46:29,012 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:46:29,073 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:46:29,153 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:46:29,231 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:46:29,538 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:46:29,618 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:46:29,692 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:46:29,715 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:46:29,785 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:46:29,843 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:46:30,295 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:46:30,302 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:46:30,841 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:46:31,102 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:46:31,122 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:46:31,132 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:46:31,133 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:46:31,134 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:46:31,150 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:46:31,230 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:46:31,236 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:46:31,239 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:46:31,246 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:46:31,251 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:46:31,952 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.532 seconds (JVM running for 5.265)
2022-10-11 19:46:33,310 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:46:33,310 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:46:33,313 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 3 ms
2022-10-11 19:46:33,489 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-1] Got MAIN_MENU callback type
2022-10-11 19:46:33,501 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 19:46:33,631 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 19:46:33,667 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 494982ac36743f5fb07dc9
2022-10-11 19:46:33,735 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Delete request with id : 6
2022-10-11 19:46:33,774 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 757 and chatId :834450967
2022-10-11 19:46:38,192 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-2] Got OFFERS_ACTIVITY callback type
2022-10-11 19:46:38,197 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :df4e55a5e7c6cf843f7e88
2022-10-11 19:46:39,010 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-3] Callback with type :MY_OFFERS and activity : PASSENGER and token: df4e55a5e7c6cf843f7e88
2022-10-11 19:46:39,017 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-3] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 19:46:40,968 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.CancelChangeOfferRequest [http-nio-5000-exec-4] Got callback : CANCEL_CHANGE_OFFER_REQUEST with token : df4e55a5e7c6cf843f7e88
2022-10-11 19:46:40,972 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : df4e55a5e7c6cf843f7e88
2022-10-11 19:46:40,984 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-4] class com.godeltech.springgodelbot.model.entity.Request wasn't found by tokenId=df4e55a5e7c6cf843f7e88
2022-10-11 19:46:40,985 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Create new token with userId :5632797057, messageId: 757 and chatId :834450967
2022-10-11 19:59:03,644 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:59:03,647 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 19:59:03,654 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 19:59:10,348 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 21652 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 19:59:10,351 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 19:59:10,964 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 19:59:11,029 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 59 ms. Found 5 JPA repository interfaces.
2022-10-11 19:59:11,376 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 19:59:11,386 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 19:59:11,386 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 19:59:11,386 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 19:59:11,471 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 19:59:11,471 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1084 ms
2022-10-11 19:59:11,574 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 19:59:11,634 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 19:59:11,720 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 19:59:11,800 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 19:59:12,128 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 19:59:12,228 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 19:59:12,293 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 19:59:12,317 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 19:59:12,392 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 19:59:12,456 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 19:59:12,870 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 19:59:12,875 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 19:59:13,419 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 19:59:13,636 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 19:59:13,653 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 19:59:13,661 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:59:13,661 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:59:13,662 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 19:59:13,680 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 19:59:13,760 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 19:59:13,766 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 19:59:13,769 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 19:59:13,777 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 19:59:13,783 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 19:59:14,400 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.388 seconds (JVM running for 5.113)
2022-10-11 19:59:26,984 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 19:59:26,986 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 19:59:26,986 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 0 ms
2022-10-11 19:59:27,122 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 19:59:27,135 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 19:59:27,291 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 19:59:27,304 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 759 and chatId :834450967
2022-10-11 19:59:28,553 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-2] Got OFFERS_ACTIVITY callback type
2022-10-11 19:59:28,559 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :5246259c5a3537e242071c
2022-10-11 19:59:28,600 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: 5246259c5a3537e242071c with activity : null
2022-10-11 19:59:28,649 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-2] null
2022-10-11 19:59:35,996 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Income message with token :5246259c5a3537e242071c
2022-10-11 19:59:36,004 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-4] There was an answer on the message with id : 5246259c5a3537e242071c
2022-10-11 19:59:52,440 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-3] Got OFFERS_ACTIVITY callback type
2022-10-11 19:59:52,444 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :5246259c5a3537e242071c
2022-10-11 19:59:52,451 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-3] There was an answer on the message with id : 5246259c5a3537e242071c
2022-10-11 19:59:59,119 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-5] Got /start message
2022-10-11 19:59:59,119 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-5] Is he member of group?
2022-10-11 19:59:59,248 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-5] Check existing of user by id: 834450967
2022-10-11 19:59:59,255 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-5] Create new token with userId :834450967, messageId: 761 and chatId :834450967
2022-10-11 20:00:00,613 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-6] Got OFFERS_ACTIVITY callback type
2022-10-11 20:00:00,619 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-6] Income message with token :ba411aa97065ee82e1c7e1
2022-10-11 20:00:00,640 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Save new request with tokenId: ba411aa97065ee82e1c7e1 with activity : null
2022-10-11 20:00:00,649 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-6] null
2022-10-11 20:00:23,123 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:00:23,126 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 20:00:23,132 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 20:00:27,347 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 6508 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 20:00:27,349 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 20:00:27,916 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 20:00:27,979 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 57 ms. Found 5 JPA repository interfaces.
2022-10-11 20:00:28,352 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 20:00:28,361 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 20:00:28,362 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 20:00:28,362 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 20:00:28,465 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 20:00:28,465 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1073 ms
2022-10-11 20:00:28,581 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 20:00:28,650 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 20:00:28,735 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 20:00:28,815 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 20:00:29,111 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 20:00:29,189 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 20:00:29,268 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 20:00:29,292 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 20:00:29,372 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 20:00:29,433 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 20:00:29,919 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 20:00:29,925 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:00:30,509 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 20:00:30,854 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 20:00:30,879 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 20:00:30,888 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:00:30,888 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:00:30,890 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:00:30,916 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 20:00:31,023 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 20:00:31,032 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 20:00:31,036 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:00:31,043 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 20:00:31,054 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 20:00:32,805 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 20:00:32,805 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 20:00:32,806 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 20:00:32,825 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 5.834 seconds (JVM running for 6.52)
2022-10-11 20:00:32,953 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-1] Got /start message
2022-10-11 20:00:32,965 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 20:00:33,208 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 20:00:33,219 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 763 and chatId :834450967
2022-10-11 20:00:34,369 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-2] Got OFFERS_ACTIVITY callback type
2022-10-11 20:00:34,373 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :bb4a1caa8c97f08749cf5e
2022-10-11 20:00:34,408 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: bb4a1caa8c97f08749cf5e with activity : null
2022-10-11 20:00:34,453 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-2] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at com.godeltech.springgodelbot.model.entity.types.PostgreSqlEnumType.nullSafeSet(PostgreSqlEnumType.java:19)
	at org.hibernate.type.CustomType.nullSafeSet(CustomType.java:160)
	at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:3073)
	at org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:3048)
	at org.hibernate.persister.entity.AbstractEntityPersister$2.bindValues(AbstractEntityPersister.java:3271)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3279)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3885)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:756)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:742)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy126.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy126.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:666)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.save(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.saveRequest(RequestServiceImpl.java:216)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$70727402.saveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType.createSendMessage(OffersActivityCallbackType.java:47)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:00:34,539 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-3] Got OFFERS_ACTIVITY callback type
2022-10-11 20:00:34,539 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :bb4a1caa8c97f08749cf5e
2022-10-11 20:00:34,546 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-3] There was an answer on the message with id : bb4a1caa8c97f08749cf5e
2022-10-11 20:04:56,660 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:04:56,662 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 20:04:56,669 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 20:05:02,470 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 8560 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 20:05:02,474 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 20:05:03,113 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 20:05:03,198 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 80 ms. Found 5 JPA repository interfaces.
2022-10-11 20:05:03,668 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 20:05:03,674 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 20:05:03,675 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 20:05:03,675 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 20:05:03,764 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 20:05:03,764 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1246 ms
2022-10-11 20:05:03,883 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 20:05:03,949 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 20:05:04,082 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 20:05:04,193 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 20:05:04,508 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 20:05:04,597 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 20:05:04,699 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 20:05:04,736 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 20:05:04,832 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 20:05:04,909 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 20:05:05,382 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 20:05:05,388 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:05:06,153 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 20:05:06,503 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 20:05:06,519 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 20:05:06,526 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:05:06,526 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:05:06,526 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:05:06,541 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 20:05:06,628 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 20:05:06,632 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:05:06,636 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 20:05:06,643 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 20:05:06,649 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 20:05:07,537 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 20:05:07,538 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 20:05:07,540 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 2 ms
2022-10-11 20:05:07,608 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 5.63 seconds (JVM running for 6.631)
2022-10-11 20:05:07,718 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-1] Got OFFERS_ACTIVITY callback type
2022-10-11 20:05:07,721 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :bb4a1caa8c97f08749cf5e
2022-10-11 20:05:07,744 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] There was an answer on the message with id : bb4a1caa8c97f08749cf5e
2022-10-11 20:05:11,361 INFO com.godeltech.springgodelbot.resolver.message.type.impl.TextAndEntityMessageType [http-nio-5000-exec-2] Got /start message
2022-10-11 20:05:11,376 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-2] Is he member of group?
2022-10-11 20:05:11,564 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-2] Check existing of user by id: 834450967
2022-10-11 20:05:11,576 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Create new token with userId :834450967, messageId: 765 and chatId :834450967
2022-10-11 20:05:14,384 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-3] Got OFFERS_ACTIVITY callback type
2022-10-11 20:05:14,389 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :934d9f86504f79abd3467d
2022-10-11 20:05:16,485 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-4] Callback with type :MY_OFFERS and activity : PASSENGER and token: 934d9f86504f79abd3467d
2022-10-11 20:05:16,495 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Save new request with tokenId: 934d9f86504f79abd3467d with activity : PASSENGER
2022-10-11 20:05:16,539 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Update request with id : 7
2022-10-11 20:05:16,539 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by id : 7
2022-10-11 20:05:16,543 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-4] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 20:05:18,931 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.CancelChangeOfferRequest [http-nio-5000-exec-5] Got callback : CANCEL_CHANGE_OFFER_REQUEST with token : 934d9f86504f79abd3467d
2022-10-11 20:05:18,936 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 934d9f86504f79abd3467d
2022-10-11 20:05:18,953 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Delete request with id : 7
2022-10-11 20:05:18,972 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-5] Delete token from messages : 934d9f86504f79abd3467d
2022-10-11 20:05:18,976 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-5] class com.godeltech.springgodelbot.model.entity.Token wasn't found by id=934d9f86504f79abd3467d
2022-10-11 20:05:18,977 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-5] Create new token with userId :5632797057, messageId: 766 and chatId :834450967
2022-10-11 20:05:20,228 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-6] Got OFFERS_ACTIVITY callback type
2022-10-11 20:05:20,299 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-6] Income message with token :8142c190a4cf0f4fa4169f
2022-10-11 20:05:21,169 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-7] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:05:21,174 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Save new request with tokenId: 8142c190a4cf0f4fa4169f with activity : PASSENGER
2022-10-11 20:05:21,199 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Update request with id : 8
2022-10-11 20:05:21,201 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by id : 8
2022-10-11 20:05:21,202 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 20:05:22,162 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-8] Got CHANGE_OFFER callback type with route id :5 and token: 8142c190a4cf0f4fa4169f by user :Myachin97
2022-10-11 20:05:22,166 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 8142c190a4cf0f4fa4169f
2022-10-11 20:05:22,179 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-8] Find offer by id : 5
2022-10-11 20:05:22,224 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-8] Find offer by id : 5
2022-10-11 20:05:23,593 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-9] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:05:23,597 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Save new request with tokenId: 8142c190a4cf0f4fa4169f with activity : PASSENGER
2022-10-11 20:05:23,632 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-9] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.saveRequest(RequestServiceImpl.java:210)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$13f82e4e.saveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:43)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:05:23,715 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-10] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:05:23,716 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Save new request with tokenId: 8142c190a4cf0f4fa4169f with activity : PASSENGER
2022-10-11 20:05:23,728 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-10] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.saveRequest(RequestServiceImpl.java:210)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$13f82e4e.saveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:43)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:05:25,810 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-1] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:05:25,814 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Save new request with tokenId: 8142c190a4cf0f4fa4169f with activity : PASSENGER
2022-10-11 20:05:25,825 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.saveRequest(RequestServiceImpl.java:210)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$13f82e4e.saveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:43)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:05:29,873 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-2] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:05:29,877 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Save new request with tokenId: 8142c190a4cf0f4fa4169f with activity : PASSENGER
2022-10-11 20:05:29,886 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-2] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.saveRequest(RequestServiceImpl.java:210)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$13f82e4e.saveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:43)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:05:37,954 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-3] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:05:38,000 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Save new request with tokenId: 8142c190a4cf0f4fa4169f with activity : PASSENGER
2022-10-11 20:05:38,010 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-3] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.saveRequest(RequestServiceImpl.java:210)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$13f82e4e.saveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:43)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:05:54,056 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-4] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:05:54,059 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Save new request with tokenId: 8142c190a4cf0f4fa4169f with activity : PASSENGER
2022-10-11 20:05:54,066 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-4] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.saveRequest(RequestServiceImpl.java:210)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$13f82e4e.saveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:43)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:06:26,114 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-5] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:06:26,118 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Save new request with tokenId: 8142c190a4cf0f4fa4169f with activity : PASSENGER
2022-10-11 20:06:26,125 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-5] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.saveRequest(RequestServiceImpl.java:210)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$13f82e4e.saveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:43)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:07:26,188 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-6] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:07:26,190 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Save new request with tokenId: 8142c190a4cf0f4fa4169f with activity : PASSENGER
2022-10-11 20:07:26,194 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-6] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.saveRequest(RequestServiceImpl.java:210)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$13f82e4e.saveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:43)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:14:51,556 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:14:51,558 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 20:14:51,563 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 20:14:57,685 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 4868 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 20:14:57,689 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 20:14:58,278 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 20:14:58,343 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 59 ms. Found 5 JPA repository interfaces.
2022-10-11 20:14:59,095 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 20:14:59,104 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 20:14:59,104 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 20:14:59,104 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 20:14:59,238 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 20:14:59,239 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1507 ms
2022-10-11 20:14:59,395 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 20:14:59,457 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 20:14:59,555 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 20:14:59,628 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 20:14:59,943 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 20:15:00,117 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 20:15:00,149 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 20:15:00,230 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 20:15:00,374 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 20:15:00,854 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 20:15:00,863 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:15:01,519 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 20:15:01,765 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 20:15:01,773 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:15:01,773 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:15:01,773 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:15:01,790 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 20:15:01,874 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 20:15:01,880 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 20:15:01,883 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:15:01,886 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 20:15:01,892 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 20:15:02,866 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 5.641 seconds (JVM running for 6.516)
2022-10-11 20:15:03,033 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:15:03,035 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 20:15:03,041 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 20:15:09,410 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 16436 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 20:15:09,413 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 20:15:09,964 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 20:15:10,027 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 57 ms. Found 5 JPA repository interfaces.
2022-10-11 20:15:10,366 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 20:15:10,374 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 20:15:10,374 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 20:15:10,374 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 20:15:10,490 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 20:15:10,491 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1040 ms
2022-10-11 20:15:10,613 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 20:15:10,681 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 20:15:10,771 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 20:15:10,842 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 20:15:11,138 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 20:15:11,204 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 20:15:11,289 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 20:15:11,315 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 20:15:11,391 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 20:15:11,457 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 20:15:11,909 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 20:15:11,915 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:15:12,505 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 20:15:12,731 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 20:15:12,750 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 20:15:12,758 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:15:12,758 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:15:12,760 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:15:12,778 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 20:15:12,867 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 20:15:12,875 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 20:15:12,879 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:15:12,882 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 20:15:12,893 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 20:15:13,617 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.572 seconds (JVM running for 5.261)
2022-10-11 20:15:15,090 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 20:15:15,090 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 20:15:15,092 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 2 ms
2022-10-11 20:15:15,216 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-1] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:15:15,225 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:15:15,284 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$bc828f7b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:15:15,382 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-3] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:15:15,382 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:15:15,396 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-3] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$bc828f7b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:15:17,444 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-4] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:15:17,449 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:15:17,461 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-4] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$bc828f7b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:15:21,511 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-2] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:15:21,515 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:15:21,525 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-2] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$bc828f7b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:15:29,575 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-5] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:15:29,580 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:15:29,592 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-5] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$bc828f7b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:15:45,636 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-6] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:15:45,638 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:15:45,649 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-6] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$bc828f7b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:16:03,785 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:16:03,787 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 20:16:03,793 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 20:16:07,232 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 22240 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 20:16:07,235 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 20:16:07,827 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 20:16:07,901 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 67 ms. Found 5 JPA repository interfaces.
2022-10-11 20:16:08,354 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 20:16:08,362 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 20:16:08,362 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 20:16:08,362 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 20:16:08,461 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 20:16:08,461 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1196 ms
2022-10-11 20:16:08,609 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 20:16:08,680 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 20:16:08,788 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 20:16:08,920 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 20:16:09,334 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 20:16:09,429 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 20:16:09,516 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 20:16:09,563 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 20:16:09,699 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 20:16:09,786 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 20:16:10,301 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 20:16:10,308 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:16:11,012 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 20:16:11,324 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 20:16:11,343 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 20:16:11,352 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:16:11,353 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:16:11,354 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:16:11,371 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 20:16:11,477 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 20:16:11,482 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 20:16:11,485 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:16:11,489 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 20:16:11,497 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 20:16:12,873 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 6.041 seconds (JVM running for 6.856)
2022-10-11 20:16:17,775 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 20:16:17,775 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 20:16:17,776 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 20:16:17,937 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-1] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:16:29,065 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:16:30,893 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 3; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 3] with root cause
javax.persistence.NonUniqueResultException: query did not return a unique result: 3
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1672)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$8080971b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:17:30,991 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-2] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:19:45,060 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:19:45,061 WARN com.zaxxer.hikari.pool.HikariPool$HouseKeeper [HikariPool-1 housekeeper] HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m36s268ms374µs900ns).
2022-10-11 20:19:45,065 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-3] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:19:45,070 WARN com.zaxxer.hikari.pool.PoolBase [http-nio-5000-exec-3] HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7c878f58 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2022-10-11 20:19:45,070 WARN com.zaxxer.hikari.pool.ProxyConnection [http-nio-5000-exec-2] HikariPool-1 - Connection org.postgresql.jdbc.PgConnection@576b35d0 marked as broken because of SQLSTATE(57P01), ErrorCode(0)
org.postgresql.util.PSQLException: FATAL: terminating connection due to unexpected postmaster exit
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:119)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)
	at org.hibernate.loader.Loader.getResultSet(Loader.java:2322)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2075)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2037)
	at org.hibernate.loader.Loader.doQuery(Loader.java:956)
	at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)
	at org.hibernate.loader.Loader.doList(Loader.java:2868)
	at org.hibernate.loader.Loader.doList(Loader.java:2850)
	at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)
	at org.hibernate.loader.Loader.list(Loader.java:2677)
	at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:540)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)
	at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)
	at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1459)
	at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)
	at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1665)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$8080971b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:19:45,073 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] SQL Error: 0, SQLState: 57P01
2022-10-11 20:19:45,073 WARN com.zaxxer.hikari.pool.PoolBase [http-nio-5000-exec-3] HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@337d7483 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2022-10-11 20:19:45,073 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] FATAL: terminating connection due to unexpected postmaster exit
2022-10-11 20:19:45,074 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] SQL Error: 0, SQLState: 08006
2022-10-11 20:19:45,074 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-2] An I/O error occurred while sending to the backend.
2022-10-11 20:19:45,074 WARN com.zaxxer.hikari.pool.PoolBase [http-nio-5000-exec-3] HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@73c0d0fb (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2022-10-11 20:19:45,075 WARN com.zaxxer.hikari.pool.PoolBase [http-nio-5000-exec-3] HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@284c585 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2022-10-11 20:19:45,077 WARN com.zaxxer.hikari.pool.PoolBase [http-nio-5000-exec-3] HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@bd33f59 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2022-10-11 20:19:45,078 WARN com.zaxxer.hikari.pool.PoolBase [http-nio-5000-exec-3] HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@53528bcc (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2022-10-11 20:19:45,080 WARN com.zaxxer.hikari.pool.PoolBase [http-nio-5000-exec-3] HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@26e0ce55 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2022-10-11 20:19:45,082 WARN com.zaxxer.hikari.pool.PoolBase [http-nio-5000-exec-3] HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@26c9fe1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2022-10-11 20:19:45,083 WARN com.zaxxer.hikari.pool.PoolBase [http-nio-5000-exec-3] HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@10d75102 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
2022-10-11 20:19:45,087 ERROR org.springframework.transaction.interceptor.TransactionAspectSupport [http-nio-5000-exec-2] Application exception overridden by rollback exception
org.springframework.orm.jpa.JpaSystemException: could not extract ResultSet; nested exception is org.hibernate.exception.GenericJDBCException: could not extract ResultSet
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:331)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$8080971b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.GenericJDBCException: could not extract ResultSet
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:67)
	at org.hibernate.loader.Loader.getResultSet(Loader.java:2322)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2075)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2037)
	at org.hibernate.loader.Loader.doQuery(Loader.java:956)
	at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)
	at org.hibernate.loader.Loader.doList(Loader.java:2868)
	at org.hibernate.loader.Loader.doList(Loader.java:2850)
	at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)
	at org.hibernate.loader.Loader.list(Loader.java:2677)
	at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:540)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)
	at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)
	at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1459)
	at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)
	at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1665)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 75 common frames omitted
Caused by: org.postgresql.util.PSQLException: FATAL: terminating connection due to unexpected postmaster exit
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:119)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)
	... 108 common frames omitted
2022-10-11 20:19:45,089 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-2] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.transaction.TransactionSystemException: Could not roll back JPA transaction; nested exception is org.hibernate.TransactionException: Unable to rollback against JDBC Connection] with root cause
java.sql.SQLException: Connection is closed
	at com.zaxxer.hikari.pool.ProxyConnection$ClosedConnection.lambda$getClosedConnection$0(ProxyConnection.java:515)
	at com.sun.proxy.$Proxy71.rollback(Unknown Source)
	at com.zaxxer.hikari.pool.ProxyConnection.rollback(ProxyConnection.java:396)
	at com.zaxxer.hikari.pool.HikariProxyConnection.rollback(HikariProxyConnection.java)
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.rollback(AbstractLogicalConnectionImplementor.java:121)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.rollback(JdbcResourceLocalTransactionCoordinatorImpl.java:304)
	at org.hibernate.engine.transaction.internal.TransactionImpl.rollback(TransactionImpl.java:142)
	at org.springframework.orm.jpa.JpaTransactionManager.doRollback(JpaTransactionManager.java:589)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:835)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.rollback(AbstractPlatformTransactionManager.java:809)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.completeTransactionAfterThrowing(TransactionAspectSupport.java:672)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:392)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$8080971b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:19:45,091 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:19:45,094 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-3] SQL Error: 0, SQLState: 42P01
2022-10-11 20:19:45,095 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-3] ERROR: relation "request" does not exist
  Position: 380
2022-10-11 20:19:45,098 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-3] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet] with root cause
org.postgresql.util.PSQLException: ERROR: relation "request" does not exist
  Position: 380
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:119)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)
	at org.hibernate.loader.Loader.getResultSet(Loader.java:2322)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2075)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2037)
	at org.hibernate.loader.Loader.doQuery(Loader.java:956)
	at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)
	at org.hibernate.loader.Loader.doList(Loader.java:2868)
	at org.hibernate.loader.Loader.doList(Loader.java:2850)
	at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)
	at org.hibernate.loader.Loader.list(Loader.java:2677)
	at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:540)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)
	at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)
	at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1459)
	at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)
	at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1665)
	at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.findByTokenId(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.getOrSaveRequest(RequestServiceImpl.java:279)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$8080971b.getOrSaveRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType.createSendMessage(MyOffersCallbackType.java:42)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:19:45,291 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:19:45,294 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 20:19:45,301 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 20:19:48,391 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 15848 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 20:19:48,395 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 20:19:48,919 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 20:19:48,978 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 53 ms. Found 5 JPA repository interfaces.
2022-10-11 20:19:49,324 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 20:19:49,330 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 20:19:49,330 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 20:19:49,330 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 20:19:49,416 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 20:19:49,416 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 982 ms
2022-10-11 20:19:49,529 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 20:19:49,595 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 20:19:49,700 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 20:19:49,805 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 20:19:50,095 INFO liquibase.logging.core.JavaLogger [main] Creating database history table with name: public.databasechangelog
2022-10-11 20:19:50,107 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 20:19:50,247 INFO liquibase.logging.core.JavaLogger [main] Table telegram_user created
2022-10-11 20:19:50,249 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.1/2022-09-06-changes-create-table-user.xml::2022-09-06-changes-create-table-userEntity::a.miachyn ran successfully in 30ms
2022-10-11 20:19:50,272 INFO liquibase.logging.core.JavaLogger [main] Table city created
2022-10-11 20:19:50,274 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.2/2022-09-08-changes-create-table-city.xml::2022-09-08-changes-create-table-city::a.miachyn ran successfully in 19ms
2022-10-11 20:19:50,280 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 20:19:50,282 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 20:19:50,283 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 20:19:50,285 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 20:19:50,286 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 20:19:50,288 INFO liquibase.logging.core.JavaLogger [main] New row inserted into city
2022-10-11 20:19:50,289 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.2/2022-09-08-changes-filling-table-city.xml::2022-09-08-changes-filling-table-city::a.miachyn ran successfully in 11ms
2022-10-11 20:19:50,298 INFO liquibase.logging.core.JavaLogger [main] Custom SQL executed
2022-10-11 20:19:50,300 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.3/2022-09-11-changes-create-type-activity_type.xml::2022-09-11--create-type-activity_type::a.miachyn ran successfully in 6ms
2022-10-11 20:19:50,318 INFO liquibase.logging.core.JavaLogger [main] Table offer created
2022-10-11 20:19:50,320 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.3/2022-09-11-changes-create-table-offer.xml::2022-09-11-changes-create-table-offer::a.miachyn ran successfully in 16ms
2022-10-11 20:19:50,336 INFO liquibase.logging.core.JavaLogger [main] Table offer_city created
2022-10-11 20:19:50,338 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.3/2022-09-11-changes-create-table-offer-city.xml::2022-09-11-changes-create-table-offer_city::a.miachyn ran successfully in 14ms
2022-10-11 20:19:50,343 INFO liquibase.logging.core.JavaLogger [main] Null constraint dropped from telegram_user.first_name
2022-10-11 20:19:50,345 INFO liquibase.logging.core.JavaLogger [main] Null constraint dropped from telegram_user.last_name
2022-10-11 20:19:50,347 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.4/2022-10-03-changes-alter-table-telegram_user.xml::2022-10-03-changes-alter-table-telegram_user::a.miachyn ran successfully in 6ms
2022-10-11 20:19:50,352 INFO liquibase.logging.core.JavaLogger [main] Null constraint dropped from offer.second_date
2022-10-11 20:19:50,354 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.5/2022-10-07-changes-alter-table-offer-second-date.xml::2022-10-07-changes-alter-table-offer-second-date::a.miachyn ran successfully in 3ms
2022-10-11 20:19:50,373 INFO liquibase.logging.core.JavaLogger [main] Table token created
2022-10-11 20:19:50,377 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.6/2022-10-10-changes-create-table-token.xml::2022-10-10-changes-create-table-token::a.miachyn ran successfully in 18ms
2022-10-11 20:19:50,384 INFO liquibase.logging.core.JavaLogger [main] Custom SQL executed
2022-10-11 20:19:50,386 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.7/2022-10-11-changes-create-type-request_type.xml::2022-10-11--create-type-request_type::a.miachyn ran successfully in 4ms
2022-10-11 20:19:50,409 INFO liquibase.logging.core.JavaLogger [main] Table request created
2022-10-11 20:19:50,412 INFO liquibase.logging.core.JavaLogger [main] ChangeSet db/changelog/v.0.7/2022-10-11-changes-create-table-request.xml::2022-10-11-changes-create-table-request::a.miachyn ran successfully in 22ms
2022-10-11 20:19:50,418 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 20:19:50,486 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 20:19:50,513 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 20:19:50,601 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 20:19:50,662 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 20:19:51,078 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 20:19:51,085 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:19:51,601 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 20:19:51,824 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 20:19:51,841 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 20:19:51,849 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:19:51,848 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:19:51,849 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:19:51,865 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 20:19:51,946 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 20:19:51,954 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 20:19:51,957 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:19:51,960 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 20:19:51,969 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 20:19:52,826 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.788 seconds (JVM running for 5.498)
2022-10-11 20:19:59,528 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 20:19:59,528 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 20:19:59,528 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 0 ms
2022-10-11 20:19:59,688 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-1] Callback with type :MY_OFFERS and activity : PASSENGER and token: 8142c190a4cf0f4fa4169f
2022-10-11 20:19:59,695 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Check request by tokenId :8142c190a4cf0f4fa4169f
2022-10-11 20:19:59,718 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-1] class com.godeltech.springgodelbot.model.entity.Token wasn't found by id=8142c190a4cf0f4fa4169f
2022-10-11 20:19:59,719 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :5632797057, messageId: 767 and chatId :834450967
2022-10-11 20:20:03,245 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-2] Got OFFERS_ACTIVITY callback type
2022-10-11 20:20:03,250 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :d04975a19dba843ff1375f
2022-10-11 20:20:04,471 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-3] Callback with type :MY_OFFERS and activity : PASSENGER and token: d04975a19dba843ff1375f
2022-10-11 20:20:04,476 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Check request by tokenId :d04975a19dba843ff1375f
2022-10-11 20:20:04,517 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-3] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 20:20:06,506 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-4] Got MAIN_MENU callback type
2022-10-11 20:20:06,517 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-4] Is he member of group?
2022-10-11 20:20:06,647 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-4] Check existing of user by id: 834450967
2022-10-11 20:20:06,688 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-4] Save a new user: UserEntity(id=834450967, firstName=Артем, lastName=Мячин, userName=Myachin97)
2022-10-11 20:20:06,709 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : d04975a19dba843ff1375f
2022-10-11 20:20:06,721 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Delete request with id : 1
2022-10-11 20:20:06,732 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Create new token with userId :834450967, messageId: 768 and chatId :834450967
2022-10-11 20:20:22,788 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-6] Income message with token :8d4eab9947fd314516dc30
2022-10-11 20:20:22,813 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-6] Got ACTIVITY callback type with activity :DRIVER and token : 8d4eab9947fd314516dc30 by user : Myachin97
2022-10-11 20:20:22,834 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-6] Find all routes
2022-10-11 20:20:22,848 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Save new request with tokenId: 8d4eab9947fd314516dc30 with activity : DRIVER
2022-10-11 20:20:23,808 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-7] Callback data with type: DRIVER_ROUTE and routeId: 3 and token: 8d4eab9947fd314516dc30 by user : Myachin97
2022-10-11 20:20:23,815 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 8d4eab9947fd314516dc30
2022-10-11 20:20:23,832 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Update request with id : 2
2022-10-11 20:20:23,832 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by id : 2
2022-10-11 20:20:24,548 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-9] Callback data with type: DRIVER_ROUTE and routeId: 5 and token: 8d4eab9947fd314516dc30 by user : Myachin97
2022-10-11 20:20:24,552 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : 8d4eab9947fd314516dc30
2022-10-11 20:20:24,564 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Update request with id : 2
2022-10-11 20:20:24,564 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by id : 2
2022-10-11 20:20:25,407 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.ChoseDateDriverCallbackType [http-nio-5000-exec-10] Callback data with type: CHOSE_DATE_DRIVER with token : 8d4eab9947fd314516dc30 by user :User(id=834450967, firstName=Артем, isBot=false, lastName=Мячин, userName=Myachin97, languageCode=en, canJoinGroups=null, canReadAllGroupMessages=null, supportInlineQueries=null)
2022-10-11 20:20:25,412 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by token id : 8d4eab9947fd314516dc30
2022-10-11 20:20:26,911 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.FirstDateDriverCallbackType [http-nio-5000-exec-5] Got FIRST_DATE_DRIVER callback type with first date :2022-11-02 with token: 8d4eab9947fd314516dc30
2022-10-11 20:20:26,915 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 8d4eab9947fd314516dc30
2022-10-11 20:20:26,924 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Update request with id : 2
2022-10-11 20:20:26,925 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by id : 2
2022-10-11 20:20:28,006 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 8d4eab9947fd314516dc30
2022-10-11 20:20:28,019 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-8] Find passengers by first date :2022-11-02 and second date:null with cities:[WROCLAW, BREST]
2022-10-11 20:20:30,042 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CheckDriverCallbackType [http-nio-5000-exec-1] Got callback type :CHECK_DRIVER_REQUEST with token :8d4eab9947fd314516dc30 by user : Myachin97
2022-10-11 20:20:30,046 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 8d4eab9947fd314516dc30
2022-10-11 20:20:30,054 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Prepare request with id :2 and user id : 834450967 for save with description
2022-10-11 20:20:34,409 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-2] Is he member of group?
2022-10-11 20:20:34,539 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Find request for saving with user id : 834450967
2022-10-11 20:20:34,551 INFO com.godeltech.springgodelbot.resolver.message.type.impl.OnlyTextMessageType [http-nio-5000-exec-2] Got message for saving description of driver with token :8d4eab9947fd314516dc30 
2022-10-11 20:20:34,686 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Save supplier by: Request(id=2, offerId=null, cities=[WROCLAW, BREST], firstDate=2022-11-02, secondDate=null, needForDescription=true, token=com.godeltech.springgodelbot.model.entity.Token@4d5b1a94, activity=DRIVER, description=Yap yap)
2022-10-11 20:20:34,746 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Delete request with id : 2
2022-10-11 20:20:34,773 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Create new token with userId :834450967 and chatId :834450967
2022-10-11 20:20:47,280 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-3] Got OFFERS_ACTIVITY callback type
2022-10-11 20:20:47,283 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :3a486d9051a0d50f0bb149
2022-10-11 20:20:48,360 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-4] Callback with type :MY_OFFERS and activity : DRIVER and token: 3a486d9051a0d50f0bb149
2022-10-11 20:20:48,363 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Check request by tokenId :3a486d9051a0d50f0bb149
2022-10-11 20:20:48,390 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-4] Find offers by id:834450967 and activity :DRIVER
2022-10-11 20:20:49,641 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-6] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:20:49,644 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:20:49,654 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-6] Find offer by id : 1
2022-10-11 20:20:49,667 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-6] SQL Error: 0, SQLState: 23505
2022-10-11 20:20:49,667 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-6] ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
2022-10-11 20:20:49,685 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-6] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [request_token_id_key]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:58)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3279)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3885)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:271)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:243)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:318)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:172)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:70)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:829)
	at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:816)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:669)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.save(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.setOfferToRequest(RequestServiceImpl.java:271)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$70727402.setOfferToRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType.createSendMessage(ChangeOfferCallbackType.java:33)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:20:49,754 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-7] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:20:49,755 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:20:49,766 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Find offer by id : 1
2022-10-11 20:20:49,774 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-7] SQL Error: 0, SQLState: 23505
2022-10-11 20:20:49,774 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-7] ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
2022-10-11 20:20:49,777 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-7] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [request_token_id_key]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:58)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3279)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3885)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:271)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:243)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:318)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:172)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:70)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:829)
	at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:816)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:669)
	at jdk.internal.reflect.GeneratedMethodAccessor132.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.save(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.setOfferToRequest(RequestServiceImpl.java:271)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$70727402.setOfferToRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType.createSendMessage(ChangeOfferCallbackType.java:33)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:20:51,825 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-9] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:20:51,828 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:20:51,836 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Find offer by id : 1
2022-10-11 20:20:51,842 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-9] SQL Error: 0, SQLState: 23505
2022-10-11 20:20:51,842 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-9] ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
2022-10-11 20:20:51,844 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-9] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [request_token_id_key]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:58)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3279)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3885)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:271)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:243)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:318)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:172)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:70)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:829)
	at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:816)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:669)
	at jdk.internal.reflect.GeneratedMethodAccessor132.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.save(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.setOfferToRequest(RequestServiceImpl.java:271)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$70727402.setOfferToRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType.createSendMessage(ChangeOfferCallbackType.java:33)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at jdk.internal.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:20:55,889 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-10] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:20:55,894 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:20:55,899 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Find offer by id : 1
2022-10-11 20:20:55,906 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-10] SQL Error: 0, SQLState: 23505
2022-10-11 20:20:55,906 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-10] ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
2022-10-11 20:20:55,908 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-10] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [request_token_id_key]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:58)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3279)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3885)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:271)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:243)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:318)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:172)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:70)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:829)
	at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:816)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:669)
	at jdk.internal.reflect.GeneratedMethodAccessor132.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.save(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.setOfferToRequest(RequestServiceImpl.java:271)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$70727402.setOfferToRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType.createSendMessage(ChangeOfferCallbackType.java:33)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at jdk.internal.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:21:03,952 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-5] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:21:03,955 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:21:03,964 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-5] Find offer by id : 1
2022-10-11 20:21:03,971 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-5] SQL Error: 0, SQLState: 23505
2022-10-11 20:21:03,971 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-5] ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
2022-10-11 20:21:03,973 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-5] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [request_token_id_key]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:58)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3279)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3885)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:271)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:243)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:318)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:172)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:70)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:829)
	at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:816)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:669)
	at jdk.internal.reflect.GeneratedMethodAccessor132.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.save(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.setOfferToRequest(RequestServiceImpl.java:271)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$70727402.setOfferToRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType.createSendMessage(ChangeOfferCallbackType.java:33)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at jdk.internal.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:21:20,019 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-8] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:21:20,022 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:21:20,032 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-8] Find offer by id : 1
2022-10-11 20:21:20,039 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-8] SQL Error: 0, SQLState: 23505
2022-10-11 20:21:20,039 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-8] ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
2022-10-11 20:21:20,042 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-8] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [request_token_id_key]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:58)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3279)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3885)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:271)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:243)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:318)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:172)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:70)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:829)
	at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:816)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:669)
	at jdk.internal.reflect.GeneratedMethodAccessor132.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.save(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.setOfferToRequest(RequestServiceImpl.java:271)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$70727402.setOfferToRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType.createSendMessage(ChangeOfferCallbackType.java:33)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at jdk.internal.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:21:52,087 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-1] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:21:52,090 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:21:52,097 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-1] Find offer by id : 1
2022-10-11 20:21:52,102 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-1] SQL Error: 0, SQLState: 23505
2022-10-11 20:21:52,102 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-5000-exec-1] ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
2022-10-11 20:21:52,104 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [request_token_id_key]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "request_token_id_key"
  Detail: Key (token_id)=(3a486d9051a0d50f0bb149) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:58)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3279)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3885)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:271)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:243)
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:318)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:172)
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:70)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:829)
	at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:816)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy126.merge(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:669)
	at jdk.internal.reflect.GeneratedMethodAccessor132.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy137.save(Unknown Source)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl.setOfferToRequest(RequestServiceImpl.java:271)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$FastClassBySpringCGLIB$$1ee45e0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.godeltech.springgodelbot.service.impl.RequestServiceImpl$$EnhancerBySpringCGLIB$$70727402.setOfferToRequest(<generated>)
	at com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType.createSendMessage(ChangeOfferCallbackType.java:33)
	at com.godeltech.springgodelbot.resolver.callback.CallbackResolver.getSendMessage(CallbackResolver.java:29)
	at com.godeltech.springgodelbot.service.impl.CallbackResolverServiceImpl.handleCallBack(CallbackResolverServiceImpl.java:20)
	at com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot.onWebhookUpdateReceived(TudaSudaTelegramBot.java:71)
	at com.godeltech.springgodelbot.controller.BotController.onUpdateReceived(BotController.java:24)
	at jdk.internal.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2022-10-11 20:22:22,690 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:22:22,692 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 20:22:22,698 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 20:22:27,279 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 8276 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 20:22:27,284 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 20:22:27,829 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 20:22:27,889 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 53 ms. Found 5 JPA repository interfaces.
2022-10-11 20:22:28,259 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 20:22:28,265 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 20:22:28,265 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 20:22:28,265 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 20:22:28,345 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 20:22:28,345 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1026 ms
2022-10-11 20:22:28,455 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 20:22:28,517 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 20:22:28,608 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 20:22:28,695 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 20:22:28,991 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 20:22:29,065 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 20:22:29,140 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 20:22:29,175 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 20:22:29,255 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 20:22:29,317 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 20:22:29,775 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 20:22:29,783 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:22:30,335 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 20:22:30,558 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 20:22:30,575 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 20:22:30,582 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:22:30,583 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:22:30,585 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:22:30,602 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 20:22:30,683 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 20:22:30,690 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 20:22:30,693 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:22:30,697 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 20:22:30,705 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 20:22:31,468 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.591 seconds (JVM running for 5.272)
2022-10-11 20:22:52,223 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 20:22:52,225 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 20:22:52,226 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 1 ms
2022-10-11 20:22:52,354 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-1] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:22:52,363 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:22:52,387 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-1] Find offer by id : 1
2022-10-11 20:22:52,536 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-2] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:22:52,537 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:22:52,553 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Find offer by id : 1
2022-10-11 20:22:52,603 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-4] Got CHANGE_OFFER callback type with route id :1 and token: 3a486d9051a0d50f0bb149 by user :Myachin97
2022-10-11 20:22:52,605 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:22:52,616 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-4] Find offer by id : 1
2022-10-11 20:22:59,574 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:22:59,585 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeRouteOfOfferCallbackType [http-nio-5000-exec-3] Callback data with type: CHANGE_ROUTE_OF_OFFER with token: 3a486d9051a0d50f0bb149
2022-10-11 20:22:59,604 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-3] Find all routes
2022-10-11 20:22:59,617 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Update request with id : 3
2022-10-11 20:22:59,618 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by id : 3
2022-10-11 20:23:01,351 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:23:01,364 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeRouteOfOfferCallbackType [http-nio-5000-exec-5] Callback data with type: CHANGE_ROUTE_OF_OFFER with token: 3a486d9051a0d50f0bb149
2022-10-11 20:23:01,365 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Update request with id : 3
2022-10-11 20:23:01,366 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by id : 3
2022-10-11 20:23:02,819 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.CancelRouteOfOfferCallbackType [http-nio-5000-exec-6] Callback data with type: CANCEL_ROUTE_OF_OFFER and routeId: 5 and token : 3a486d9051a0d50f0bb149
2022-10-11 20:23:02,823 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:23:05,494 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.FinishChangeRouteOfOfferCallbackType [http-nio-5000-exec-7] Got callback type :FINISH_CHANGING_ROUTE_OF_OFFER, with token:3a486d9051a0d50f0bb149
2022-10-11 20:23:05,497 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:23:05,507 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Update route of offer with id :1
2022-10-11 20:23:05,508 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Update cities of offer with id : 1 and cities : [WROCLAW, BREST, GRODNO] 
2022-10-11 20:23:05,508 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Get offer by id: 1
2022-10-11 20:23:05,530 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Find passengers by first date :2022-11-02 and second date:null with cities:[WROCLAW, BREST, GRODNO]
2022-10-11 20:23:05,560 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-7] Delete token from messages : 3a486d9051a0d50f0bb149
2022-10-11 20:23:15,329 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-8] Got MAIN_MENU callback type
2022-10-11 20:23:15,341 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-8] Is he member of group?
2022-10-11 20:23:15,446 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-8] Check existing of user by id: 834450967
2022-10-11 20:23:15,458 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 3a486d9051a0d50f0bb149
2022-10-11 20:23:15,463 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Delete request with id : 3
2022-10-11 20:23:15,474 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-8] Create new token with userId :834450967, messageId: 770 and chatId :834450967
2022-10-11 20:23:16,644 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-9] Got OFFERS_ACTIVITY callback type
2022-10-11 20:23:16,649 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-9] Income message with token :a3470bafae387d27d6b18d
2022-10-11 20:23:18,345 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-10] Callback with type :MY_OFFERS and activity : PASSENGER and token: a3470bafae387d27d6b18d
2022-10-11 20:23:18,350 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Check request by tokenId :a3470bafae387d27d6b18d
2022-10-11 20:23:18,383 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 20:23:19,644 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-1] Got MAIN_MENU callback type
2022-10-11 20:23:19,645 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-1] Is he member of group?
2022-10-11 20:23:19,738 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-1] Check existing of user by id: 834450967
2022-10-11 20:23:19,746 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : a3470bafae387d27d6b18d
2022-10-11 20:23:19,756 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Delete request with id : 11
2022-10-11 20:23:19,775 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Create new token with userId :834450967, messageId: 770 and chatId :834450967
2022-10-11 20:23:21,842 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-2] Got OFFERS_ACTIVITY callback type
2022-10-11 20:23:21,848 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-2] Income message with token :3b4c1c90a10b0f51923cb0
2022-10-11 20:23:22,705 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-4] Callback with type :MY_OFFERS and activity : DRIVER and token: 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:22,708 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Check request by tokenId :3b4c1c90a10b0f51923cb0
2022-10-11 20:23:22,727 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-4] Find offers by id:834450967 and activity :DRIVER
2022-10-11 20:23:24,687 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-3] Got CHANGE_OFFER callback type with route id :1 and token: 3b4c1c90a10b0f51923cb0 by user :Myachin97
2022-10-11 20:23:24,692 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by token id : 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:24,701 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-3] Find offer by id : 1
2022-10-11 20:23:25,627 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-5] Callback with type :MY_OFFERS and activity : DRIVER and token: 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:25,630 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Check request by tokenId :3b4c1c90a10b0f51923cb0
2022-10-11 20:23:25,639 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-5] Find offers by id:834450967 and activity :DRIVER
2022-10-11 20:23:27,366 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-6] Got CHANGE_OFFER callback type with route id :1 and token: 3b4c1c90a10b0f51923cb0 by user :Myachin97
2022-10-11 20:23:27,371 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:27,378 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-6] Find offer by id : 1
2022-10-11 20:23:28,985 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeDateOfOfferCallbackType [http-nio-5000-exec-7] Got CHANGE_DATE_OF_OFFER type with token: 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:28,989 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:28,998 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeDateOfOfferCallbackType [http-nio-5000-exec-7] Change date of offer with id:1, with token :3b4c1c90a10b0f51923cb0
2022-10-11 20:23:30,521 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeSecondDateOfOfferCallbackType [http-nio-5000-exec-8] Change date of offer with date :2022-11-03 with token: 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:30,526 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:30,536 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Update request with id : 12
2022-10-11 20:23:30,536 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by id : 12
2022-10-11 20:23:31,682 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.FinishChangeDateOfferCallbackType [http-nio-5000-exec-9] Got FINISH_DATE_OFFER callback type with token : 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:31,687 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:31,696 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Update date of offer with first date : 2022-11-02 , and second date : 2022-11-03 
2022-10-11 20:23:31,697 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Get offer by id: 1
2022-10-11 20:23:31,722 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Find passengers by first date :2022-11-02 and second date:2022-11-03 with cities:[WROCLAW, BREST, GRODNO]
2022-10-11 20:23:34,886 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-10] Got MAIN_MENU callback type
2022-10-11 20:23:34,887 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-10] Is he member of group?
2022-10-11 20:23:34,960 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-10] Check existing of user by id: 834450967
2022-10-11 20:23:34,966 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by token id : 3b4c1c90a10b0f51923cb0
2022-10-11 20:23:34,972 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Delete request with id : 12
2022-10-11 20:23:34,979 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Create new token with userId :834450967, messageId: 770 and chatId :834450967
2022-10-11 20:23:42,697 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-1] Got OFFERS_ACTIVITY callback type
2022-10-11 20:23:42,701 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :7b447383ed9474541d7650
2022-10-11 20:23:44,566 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-2] Callback with type :MY_OFFERS and activity : PASSENGER and token: 7b447383ed9474541d7650
2022-10-11 20:23:44,570 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Check request by tokenId :7b447383ed9474541d7650
2022-10-11 20:23:44,620 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 20:23:45,943 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-4] Got MAIN_MENU callback type
2022-10-11 20:23:45,943 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-4] Is he member of group?
2022-10-11 20:23:46,314 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-4] Check existing of user by id: 834450967
2022-10-11 20:23:46,341 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : 7b447383ed9474541d7650
2022-10-11 20:23:46,348 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Delete request with id : 13
2022-10-11 20:23:46,369 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Create new token with userId :834450967, messageId: 770 and chatId :834450967
2022-10-11 20:23:47,482 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :6648a3bafb35e088e91212
2022-10-11 20:23:47,505 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-3] Got ACTIVITY callback type with activity :PASSENGER and token : 6648a3bafb35e088e91212 by user : Myachin97
2022-10-11 20:23:47,506 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Save new request with tokenId: 6648a3bafb35e088e91212 with activity : PASSENGER
2022-10-11 20:23:49,309 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-5] Callback data with type: PASSENGER_ROUTE and routeId: 3 and with token: 6648a3bafb35e088e91212
2022-10-11 20:23:49,313 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 6648a3bafb35e088e91212
2022-10-11 20:23:49,323 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Update request with id : 14
2022-10-11 20:23:49,323 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by id : 14
2022-10-11 20:23:50,019 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-6] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: 6648a3bafb35e088e91212
2022-10-11 20:23:50,024 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 6648a3bafb35e088e91212
2022-10-11 20:23:50,032 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Update request with id : 14
2022-10-11 20:23:50,033 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by id : 14
2022-10-11 20:23:51,117 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-7] Callback data with type: PASSENGER_ROUTE and routeId: 6 and with token: 6648a3bafb35e088e91212
2022-10-11 20:23:51,121 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 6648a3bafb35e088e91212
2022-10-11 20:23:51,129 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Update request with id : 14
2022-10-11 20:23:51,129 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by id : 14
2022-10-11 20:23:52,139 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-8] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: 6648a3bafb35e088e91212
2022-10-11 20:23:52,142 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 6648a3bafb35e088e91212
2022-10-11 20:23:52,152 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Update request with id : 14
2022-10-11 20:23:52,153 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by id : 14
2022-10-11 20:23:53,099 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-9] Callback data with type: CHOSE_DATE_PASSENGER with token : 6648a3bafb35e088e91212 by user :Myachin97
2022-10-11 20:23:53,103 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : 6648a3bafb35e088e91212
2022-10-11 20:23:54,368 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-10] Got FIRST_DATE_PASSENGER type with first date :2022-10-30 with token: 6648a3bafb35e088e91212
2022-10-11 20:23:54,371 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by token id : 6648a3bafb35e088e91212
2022-10-11 20:23:54,383 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Update request with id : 14
2022-10-11 20:23:54,383 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by id : 14
2022-10-11 20:23:55,710 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FinishDatePassengerCallbackType [http-nio-5000-exec-1] Callback : FINISH_CHOSE_DATE_PASSENGER type with token : 6648a3bafb35e088e91212 by user : Myachin97
2022-10-11 20:23:55,715 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 6648a3bafb35e088e91212
2022-10-11 20:23:55,723 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-1] Find drivers by first date :2022-10-30 and second date:null with cities:[WROCLAW, BREST]
2022-10-11 20:23:58,338 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CheckPassengerCallbackType [http-nio-5000-exec-2] Got callback with type : CHECK_PASSENGER_REQUEST with token : 6648a3bafb35e088e91212
2022-10-11 20:23:58,342 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by token id : 6648a3bafb35e088e91212
2022-10-11 20:23:58,350 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Prepare request with id :14 and user id : 834450967 for save with description
2022-10-11 20:23:59,565 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.SavePassengerWithoutDescriptionCallbackType [http-nio-5000-exec-4] Got callback with type : SAVE_PASSENGER_WITHOUT_DESCRIPTION with token : 6648a3bafb35e088e91212
2022-10-11 20:23:59,569 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : 6648a3bafb35e088e91212
2022-10-11 20:23:59,589 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-4] Save passenger request : Request(id=14, offerId=null, cities=[WROCLAW, BREST], firstDate=2022-10-30, secondDate=null, needForDescription=true, token=com.godeltech.springgodelbot.model.entity.Token@1f25c95, activity=PASSENGER, description=null)
2022-10-11 20:23:59,629 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Delete request with id : 14
2022-10-11 20:23:59,877 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Create new token with userId :834450967, messageId: 770 and chatId :834450967
2022-10-11 20:24:16,299 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Income message with token :f44175a2efaab2e2ad14c6
2022-10-11 20:24:16,318 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-3] Got ACTIVITY callback type with activity :PASSENGER and token : f44175a2efaab2e2ad14c6 by user : Myachin97
2022-10-11 20:24:16,319 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Save new request with tokenId: f44175a2efaab2e2ad14c6 with activity : PASSENGER
2022-10-11 20:24:17,464 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-5] Callback data with type: PASSENGER_ROUTE and routeId: 3 and with token: f44175a2efaab2e2ad14c6
2022-10-11 20:24:17,469 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : f44175a2efaab2e2ad14c6
2022-10-11 20:24:17,482 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Update request with id : 15
2022-10-11 20:24:17,482 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by id : 15
2022-10-11 20:24:18,238 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-6] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: f44175a2efaab2e2ad14c6
2022-10-11 20:24:18,242 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : f44175a2efaab2e2ad14c6
2022-10-11 20:24:18,250 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Update request with id : 15
2022-10-11 20:24:18,251 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by id : 15
2022-10-11 20:24:19,747 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-7] Callback data with type: CHOSE_DATE_PASSENGER with token : f44175a2efaab2e2ad14c6 by user :Myachin97
2022-10-11 20:24:19,750 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : f44175a2efaab2e2ad14c6
2022-10-11 20:24:21,454 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-8] Got FIRST_DATE_PASSENGER type with first date :2022-11-02 with token: f44175a2efaab2e2ad14c6
2022-10-11 20:24:21,457 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : f44175a2efaab2e2ad14c6
2022-10-11 20:24:21,465 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Update request with id : 15
2022-10-11 20:24:21,466 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by id : 15
2022-10-11 20:24:23,040 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CancelPassengerRequestCallbackType [http-nio-5000-exec-9] Got callback : CANCEL_PASSENGER_REQUEST with token : f44175a2efaab2e2ad14c6
2022-10-11 20:24:23,043 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : f44175a2efaab2e2ad14c6
2022-10-11 20:24:23,051 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Delete request with id : 15
2022-10-11 20:24:23,317 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-9] Create new token with userId :834450967, messageId: 771 and chatId :834450967
2022-10-11 20:24:24,816 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Income message with token :8e4e51a98399818f7b0b8f
2022-10-11 20:24:24,828 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-10] Got ACTIVITY callback type with activity :PASSENGER and token : 8e4e51a98399818f7b0b8f by user : Myachin97
2022-10-11 20:24:24,828 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Save new request with tokenId: 8e4e51a98399818f7b0b8f with activity : PASSENGER
2022-10-11 20:24:25,796 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-1] Callback data with type: PASSENGER_ROUTE and routeId: 3 and with token: 8e4e51a98399818f7b0b8f
2022-10-11 20:24:25,802 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 8e4e51a98399818f7b0b8f
2022-10-11 20:24:25,811 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Update request with id : 16
2022-10-11 20:24:25,811 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by id : 16
2022-10-11 20:24:26,444 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-2] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: 8e4e51a98399818f7b0b8f
2022-10-11 20:24:26,448 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by token id : 8e4e51a98399818f7b0b8f
2022-10-11 20:24:26,459 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Update request with id : 16
2022-10-11 20:24:26,460 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by id : 16
2022-10-11 20:24:27,234 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-4] Callback data with type: CHOSE_DATE_PASSENGER with token : 8e4e51a98399818f7b0b8f by user :Myachin97
2022-10-11 20:24:27,236 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : 8e4e51a98399818f7b0b8f
2022-10-11 20:24:28,375 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-3] Got FIRST_DATE_PASSENGER type with first date :2022-11-05 with token: 8e4e51a98399818f7b0b8f
2022-10-11 20:24:28,381 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by token id : 8e4e51a98399818f7b0b8f
2022-10-11 20:24:28,386 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Update request with id : 16
2022-10-11 20:24:28,386 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by id : 16
2022-10-11 20:24:29,217 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FinishDatePassengerCallbackType [http-nio-5000-exec-5] Callback : FINISH_CHOSE_DATE_PASSENGER type with token : 8e4e51a98399818f7b0b8f by user : Myachin97
2022-10-11 20:24:29,222 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 8e4e51a98399818f7b0b8f
2022-10-11 20:24:29,231 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-5] Find drivers by first date :2022-11-05 and second date:null with cities:[WROCLAW, BREST]
2022-10-11 20:24:30,997 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CancelPassengerRequestCallbackType [http-nio-5000-exec-6] Got callback : CANCEL_PASSENGER_REQUEST with token : 8e4e51a98399818f7b0b8f
2022-10-11 20:24:31,001 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 8e4e51a98399818f7b0b8f
2022-10-11 20:24:31,008 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Delete request with id : 16
2022-10-11 20:24:31,181 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-6] Create new token with userId :834450967, messageId: 772 and chatId :834450967
2022-10-11 20:31:50,480 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:31:50,482 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 20:31:50,488 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-10-11 20:31:56,622 INFO org.springframework.boot.StartupInfoLogger [main] Starting SpringGodelBotApplication using Java 11.0.12 on INV-2021-L with PID 1064 (C:\Users\a.miachyn\IdeaProjects\SpringGodelBot\target\classes started by a.miachyn in C:\Users\a.miachyn\IdeaProjects\SpringGodelBot)
2022-10-11 20:31:56,626 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-10-11 20:31:57,163 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-10-11 20:31:57,220 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2022-10-11 20:31:57,572 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 5000 (http)
2022-10-11 20:31:57,578 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-5000"]
2022-10-11 20:31:57,578 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2022-10-11 20:31:57,578 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-10-11 20:31:57,660 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2022-10-11 20:31:57,660 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 998 ms
2022-10-11 20:31:57,771 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-10-11 20:31:57,834 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-10-11 20:31:57,927 INFO liquibase.logging.core.JavaLogger [main] Set default schema name to public
2022-10-11 20:31:57,992 INFO liquibase.logging.core.JavaLogger [main] Successfully acquired change log lock
2022-10-11 20:31:58,283 INFO liquibase.logging.core.JavaLogger [main] Reading from public.databasechangelog
2022-10-11 20:31:58,373 INFO liquibase.logging.core.JavaLogger [main] Successfully released change log lock
2022-10-11 20:31:58,440 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-10-11 20:31:58,464 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-10-11 20:31:58,550 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-10-11 20:31:58,625 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2022-10-11 20:31:59,103 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-10-11 20:31:59,109 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:31:59,764 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-10-11 20:32:00,013 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-5000"]
2022-10-11 20:32:00,030 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 5000 (http) with context path ''
2022-10-11 20:32:00,039 INFO com.godeltech.springgodelbot.config.BotInitializer [main] Set web hook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:32:00,038 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:32:00,039 INFO com.godeltech.springgodelbot.service.impl.RestServiceImpl [main] Set webhook with path :https://1561-82-209-241-194.eu.ngrok.io
2022-10-11 20:32:00,056 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose second date is earlier than : 2022-10-11
2022-10-11 20:32:00,138 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [scheduling-1] Delete offers whose first date is earlier than :2022-10-11 and second date is null
2022-10-11 20:32:00,143 INFO com.godeltech.springgodelbot.scheduler.impl.ScheduleServiceImpl [scheduling-1] Deleting expired offers
2022-10-11 20:32:00,146 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete non usable expired tokens
2022-10-11 20:32:00,152 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Remove expired token
2022-10-11 20:32:00,156 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [scheduling-1] Delete tokens : []
2022-10-11 20:32:00,731 INFO org.apache.juli.logging.DirectJDKLog [http-nio-5000-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-10-11 20:32:00,731 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Initializing Servlet 'dispatcherServlet'
2022-10-11 20:32:00,736 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-5000-exec-1] Completed initialization in 5 ms
2022-10-11 20:32:00,897 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-1] Got ACTIVITY callback type with activity :PASSENGER and token : 244af994b1ffb1cfaede76 by user : Myachin97
2022-10-11 20:32:00,916 INFO com.godeltech.springgodelbot.service.impl.CityServiceImpl [http-nio-5000-exec-1] Find all routes
2022-10-11 20:32:00,938 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Save new request with tokenId: 244af994b1ffb1cfaede76 with activity : PASSENGER
2022-10-11 20:32:00,938 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-1] Income message with token :244af994b1ffb1cfaede76
2022-10-11 20:32:01,162 INFO org.springframework.boot.StartupInfoLogger [main] Started SpringGodelBotApplication in 4.888 seconds (JVM running for 5.642)
2022-10-11 20:32:02,268 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-2] Callback data with type: PASSENGER_ROUTE and routeId: 6 and with token: 244af994b1ffb1cfaede76
2022-10-11 20:32:02,274 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by token id : 244af994b1ffb1cfaede76
2022-10-11 20:32:02,305 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Update request with id : 17
2022-10-11 20:32:02,305 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by id : 17
2022-10-11 20:32:02,991 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.PassengerRouteCallbackType [http-nio-5000-exec-3] Callback data with type: PASSENGER_ROUTE and routeId: 5 and with token: 244af994b1ffb1cfaede76
2022-10-11 20:32:02,995 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by token id : 244af994b1ffb1cfaede76
2022-10-11 20:32:03,003 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Update request with id : 17
2022-10-11 20:32:03,004 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by id : 17
2022-10-11 20:32:03,854 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.ChoseDatePassengerCallbackType [http-nio-5000-exec-4] Callback data with type: CHOSE_DATE_PASSENGER with token : 244af994b1ffb1cfaede76 by user :Myachin97
2022-10-11 20:32:03,859 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : 244af994b1ffb1cfaede76
2022-10-11 20:32:04,933 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FirstDatePassengerCallbackType [http-nio-5000-exec-5] Got FIRST_DATE_PASSENGER type with first date :2022-10-30 with token: 244af994b1ffb1cfaede76
2022-10-11 20:32:04,939 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 244af994b1ffb1cfaede76
2022-10-11 20:32:04,950 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Update request with id : 17
2022-10-11 20:32:04,951 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by id : 17
2022-10-11 20:32:05,947 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.FinishDatePassengerCallbackType [http-nio-5000-exec-6] Callback : FINISH_CHOSE_DATE_PASSENGER type with token : 244af994b1ffb1cfaede76 by user : Myachin97
2022-10-11 20:32:05,951 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 244af994b1ffb1cfaede76
2022-10-11 20:32:05,968 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-6] Find drivers by first date :2022-10-30 and second date:null with cities:[GRODNO, BREST]
2022-10-11 20:32:07,749 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.passenger.CancelPassengerRequestCallbackType [http-nio-5000-exec-7] Got callback : CANCEL_PASSENGER_REQUEST with token : 244af994b1ffb1cfaede76
2022-10-11 20:32:07,754 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 244af994b1ffb1cfaede76
2022-10-11 20:32:07,768 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Delete request with id : 17
2022-10-11 20:32:08,044 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-7] Create new token with userId :834450967, messageId: 773 and chatId :834450967
2022-10-11 20:32:09,012 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.ActivityCallbackType [http-nio-5000-exec-8] Got ACTIVITY callback type with activity :DRIVER and token : 854ea7b088c560549d0329 by user : Myachin97
2022-10-11 20:32:09,017 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Save new request with tokenId: 854ea7b088c560549d0329 with activity : DRIVER
2022-10-11 20:32:09,017 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-8] Income message with token :854ea7b088c560549d0329
2022-10-11 20:32:09,917 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-9] Callback data with type: DRIVER_ROUTE and routeId: 6 and token: 854ea7b088c560549d0329 by user : Myachin97
2022-10-11 20:32:09,925 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : 854ea7b088c560549d0329
2022-10-11 20:32:09,934 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Update request with id : 18
2022-10-11 20:32:09,934 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by id : 18
2022-10-11 20:32:12,633 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-10] Callback data with type: DRIVER_ROUTE and routeId: 2 and token: 854ea7b088c560549d0329 by user : Myachin97
2022-10-11 20:32:12,637 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by token id : 854ea7b088c560549d0329
2022-10-11 20:32:12,648 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Update request with id : 18
2022-10-11 20:32:12,649 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by id : 18
2022-10-11 20:32:13,906 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CancelDriverRouteCallbackType [http-nio-5000-exec-1] Callback data with type: DRIVER_ROUTE and routeId: 2 and token : 854ea7b088c560549d0329 by user : Myachin97
2022-10-11 20:32:13,910 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : 854ea7b088c560549d0329
2022-10-11 20:32:13,919 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Update request with id : 18
2022-10-11 20:32:13,919 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by id : 18
2022-10-11 20:32:15,240 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.DriverRouteCallbackType [http-nio-5000-exec-2] Callback data with type: DRIVER_ROUTE and routeId: 3 and token: 854ea7b088c560549d0329 by user : Myachin97
2022-10-11 20:32:15,245 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by token id : 854ea7b088c560549d0329
2022-10-11 20:32:15,257 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Update request with id : 18
2022-10-11 20:32:15,257 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Get request by id : 18
2022-10-11 20:32:16,958 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.ChoseDateDriverCallbackType [http-nio-5000-exec-3] Callback data with type: CHOSE_DATE_DRIVER with token : 854ea7b088c560549d0329 by user :User(id=834450967, firstName=Артем, isBot=false, lastName=Мячин, userName=Myachin97, languageCode=en, canJoinGroups=null, canReadAllGroupMessages=null, supportInlineQueries=null)
2022-10-11 20:32:16,963 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by token id : 854ea7b088c560549d0329
2022-10-11 20:32:18,344 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.FirstDateDriverCallbackType [http-nio-5000-exec-4] Got FIRST_DATE_DRIVER callback type with first date :2022-11-06 with token: 854ea7b088c560549d0329
2022-10-11 20:32:18,348 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by token id : 854ea7b088c560549d0329
2022-10-11 20:32:18,358 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Update request with id : 18
2022-10-11 20:32:18,359 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-4] Get request by id : 18
2022-10-11 20:32:21,355 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Get request by token id : 854ea7b088c560549d0329
2022-10-11 20:32:21,367 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-5] Find passengers by first date :2022-11-06 and second date:null with cities:[GRODNO, WROCLAW]
2022-10-11 20:32:23,501 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.driver.CheckDriverCallbackType [http-nio-5000-exec-6] Got callback type :CHECK_DRIVER_REQUEST with token :854ea7b088c560549d0329 by user : Myachin97
2022-10-11 20:32:23,504 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 854ea7b088c560549d0329
2022-10-11 20:32:23,517 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Prepare request with id :18 and user id : 834450967 for save with description
2022-10-11 20:32:26,979 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-7] Is he member of group?
2022-10-11 20:32:27,108 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Find request for saving with user id : 834450967
2022-10-11 20:32:27,122 INFO com.godeltech.springgodelbot.resolver.message.type.impl.OnlyTextMessageType [http-nio-5000-exec-7] Got message for saving description of driver with token :854ea7b088c560549d0329 
2022-10-11 20:32:27,301 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-7] Save supplier by: Request(id=18, offerId=null, cities=[GRODNO, WROCLAW], firstDate=2022-11-06, secondDate=null, needForDescription=true, token=com.godeltech.springgodelbot.model.entity.Token@52d0dd59, activity=DRIVER, description=Yep yep)
2022-10-11 20:32:27,393 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Delete request with id : 18
2022-10-11 20:32:27,437 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-7] Create new token with userId :834450967 and chatId :834450967
2022-10-11 20:32:31,485 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-8] Is he member of group?
2022-10-11 20:32:31,602 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Find request for saving with user id : 834450967
2022-10-11 20:32:31,610 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-8] Sorry but the command is incorrect
2022-10-11 20:32:41,680 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-9] Got OFFERS_ACTIVITY callback type
2022-10-11 20:32:41,683 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-9] Income message with token :f548a68e9fbc9a149be10e
2022-10-11 20:32:44,431 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-10] Callback with type :MY_OFFERS and activity : PASSENGER and token: f548a68e9fbc9a149be10e
2022-10-11 20:32:44,436 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Check request by tokenId :f548a68e9fbc9a149be10e
2022-10-11 20:32:44,473 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-10] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 20:32:46,713 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-1] Got CHANGE_OFFER callback type with route id :2 and token: f548a68e9fbc9a149be10e by user :Myachin97
2022-10-11 20:32:46,716 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-1] Get request by token id : f548a68e9fbc9a149be10e
2022-10-11 20:32:46,725 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-1] Find offer by id : 2
2022-10-11 20:32:47,830 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-2] Callback with type :MY_OFFERS and activity : PASSENGER and token: f548a68e9fbc9a149be10e
2022-10-11 20:32:47,835 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-2] Check request by tokenId :f548a68e9fbc9a149be10e
2022-10-11 20:32:47,860 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-2] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 20:32:48,658 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.CancelChangeOfferRequest [http-nio-5000-exec-3] Got callback : CANCEL_CHANGE_OFFER_REQUEST with token : f548a68e9fbc9a149be10e
2022-10-11 20:32:48,661 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Get request by token id : f548a68e9fbc9a149be10e
2022-10-11 20:32:48,669 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-3] Delete request with id : 19
2022-10-11 20:32:48,688 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Delete token from messages : f548a68e9fbc9a149be10e
2022-10-11 20:32:48,694 ERROR com.godeltech.springgodelbot.handler.BotHandler [http-nio-5000-exec-3] class com.godeltech.springgodelbot.model.entity.Token wasn't found by id=f548a68e9fbc9a149be10e
2022-10-11 20:32:48,695 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-3] Create new token with userId :5632797057, messageId: 776 and chatId :834450967
2022-10-11 20:32:50,140 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.OffersActivityCallbackType [http-nio-5000-exec-4] Got OFFERS_ACTIVITY callback type
2022-10-11 20:32:50,145 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-4] Income message with token :3140ffb03a3970bbd78099
2022-10-11 20:32:51,514 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.MyOffersCallbackType [http-nio-5000-exec-5] Callback with type :MY_OFFERS and activity : PASSENGER and token: 3140ffb03a3970bbd78099
2022-10-11 20:32:51,518 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-5] Check request by tokenId :3140ffb03a3970bbd78099
2022-10-11 20:32:51,545 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-5] Find offers by id:834450967 and activity :PASSENGER
2022-10-11 20:32:52,428 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeOfferCallbackType [http-nio-5000-exec-6] Got CHANGE_OFFER callback type with route id :2 and token: 3140ffb03a3970bbd78099 by user :Myachin97
2022-10-11 20:32:52,433 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-6] Get request by token id : 3140ffb03a3970bbd78099
2022-10-11 20:32:52,441 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-6] Find offer by id : 2
2022-10-11 20:32:53,866 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeDateOfOfferCallbackType [http-nio-5000-exec-7] Got CHANGE_DATE_OF_OFFER type with token: 3140ffb03a3970bbd78099
2022-10-11 20:32:53,871 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-7] Get request by token id : 3140ffb03a3970bbd78099
2022-10-11 20:32:53,878 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeDateOfOfferCallbackType [http-nio-5000-exec-7] Change date of offer with id:2, with token :3140ffb03a3970bbd78099
2022-10-11 20:32:55,157 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.ChangeSecondDateOfOfferCallbackType [http-nio-5000-exec-8] Change date of offer with date :2022-11-03 with token: 3140ffb03a3970bbd78099
2022-10-11 20:32:55,160 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by token id : 3140ffb03a3970bbd78099
2022-10-11 20:32:55,169 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Update request with id : 20
2022-10-11 20:32:55,170 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-8] Get request by id : 20
2022-10-11 20:32:56,513 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.offer.FinishChangeDateOfferCallbackType [http-nio-5000-exec-9] Got FINISH_DATE_OFFER callback type with token : 3140ffb03a3970bbd78099
2022-10-11 20:32:56,521 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-9] Get request by token id : 3140ffb03a3970bbd78099
2022-10-11 20:32:56,533 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Update date of offer with first date : 2022-10-30 , and second date : 2022-11-03 
2022-10-11 20:32:56,533 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Get offer by id: 2
2022-10-11 20:32:56,546 INFO com.godeltech.springgodelbot.service.impl.OfferServiceImpl [http-nio-5000-exec-9] Find drivers by first date :2022-10-30 and second date:2022-11-03 with cities:[WROCLAW, BREST]
2022-10-11 20:32:58,976 INFO com.godeltech.springgodelbot.resolver.callback.type.impl.MainMenuCallbackType [http-nio-5000-exec-10] Got MAIN_MENU callback type
2022-10-11 20:32:58,976 INFO com.godeltech.springgodelbot.service.impl.TudaSudaTelegramBot [http-nio-5000-exec-10] Is he member of group?
2022-10-11 20:32:59,123 INFO com.godeltech.springgodelbot.service.impl.UserServiceImpl [http-nio-5000-exec-10] Check existing of user by id: 834450967
2022-10-11 20:32:59,138 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Get request by token id : 3140ffb03a3970bbd78099
2022-10-11 20:32:59,145 INFO com.godeltech.springgodelbot.service.impl.RequestServiceImpl [http-nio-5000-exec-10] Delete request with id : 20
2022-10-11 20:32:59,162 INFO com.godeltech.springgodelbot.service.impl.TokenServiceImpl [http-nio-5000-exec-10] Create new token with userId :834450967, messageId: 778 and chatId :834450967
2022-10-11 20:39:37,573 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-10-11 20:39:37,573 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-10-11 20:39:37,585 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
